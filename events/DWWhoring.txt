### This section of the mod exists largely to the fine work done in nadamod and it's brothel whoring functionality.
# .1 - Visit the whorehouse
# .100 - Visit target is a woman
# .300 - Visit target is a man
# .400 - Visit target is a futa
# .500 - Working the whore house
# .999 - Flag cleanup
# .1000 - Stop being a whore
# .1100 - Special whoring events
# .2000 - Glory Holes
# .3000 - Mystery Room
# .4000 - Erotic Dancer/Pole Dancer/Strip Tease
# .5000 - Jessica Performance

namespace = DWWhoring
# .1 Whorehouse special event check
character_event = {
	id = DWWhoring.1
	hide_window = yes
	is_triggered_only = yes # by decision
	immediate = {
		random_list = {
			100 = { # Normal visit
				narrative_event = { id = DWWhoring.2 }
			}
			25 = { # Shantae appears
				trigger = { # As of 2.7, a random list can use a trigger for a value - and if the trigger isn't met, the value zeroes out.
					has_fae_content = yes # Shantae is an elf, and as such should have the Fae content active
					has_global_flag = dw_bordello_poledancer # The pole dancer improvement should have been built
					NOT = { has_global_flag = dw_created_shantae } # We should not have created Shantae yet.
					NOT = { ai = yes } # It should be the player, not AI that has the event.
				}
				narrative_event = { id = DWWhoring.1100 }
			}
		}
	}
}
# .2 Normal whorehouse visit
narrative_event = {
	id = DWWhoring.2
	desc = DWWhoring1 # id  used to be DWWhoring.1 - we're not worrying about changing the desc or option names though, as they still apply.
	picture = brothel
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by decision
	option = { #seeking female
		name = DWWhoring1A
		narrative_event = {id = DWWhoring.10 }
	}
	option = { #seeking male
		name = DWWhoring1B
		narrative_event = {id = DWWhoring.20 }
	}
	option = { #Futanari
		trigger = {
			has_global_flag = dw_futa_active # We check to see if they've the futa mod active - not because it's necessary, but because we're assuming they don't want this content if they're not using the mod
		}
		name = DWWhoring1C
		narrative_event = {id = DWWhoring.30 }
	}
	option = { #Special Options
		trigger = {
			OR = {
				has_global_flag = dw_bordello_gloryhole 
				has_global_flag = dw_bordello_mystery_room 
				has_global_flag = dw_bordello_poledancer
				AND = {
					has_global_flag = dw_jessica_created
					any_courtier = {
						has_character_flag = dw_npc_jessica
						OR = {
							NOT = { age = 40 }
							trait = immortal
						}
					}
				}
			}
		}
		name = DWWhoring1D
		narrative_event = { id = DWWhoring.5 }
	}
}
# .5 Special whore house options
narrative_event = {
	id = DWWhoring.5
	desc = DWWhoring5
	picture = brothel
	title = dw_visiting_brothel_title
	is_triggered_only = yes # .2
	option = { # Glory Hole
		trigger = {
			has_global_flag = dw_bordello_gloryhole
		}
		name = DWWhoring5A
		narrative_event = { id = DWWhoring.6 }
	}
	option = { # Mystery Room
		trigger = {
			has_global_flag = dw_bordello_mystery_room
			wealth = 5
		}
		name = DWWhoring5B
		character_event = { id = DWWhoring.7 }
		wealth = -5
	}
	option = { # Pole Dancer
		trigger = {
			has_global_flag = dw_bordello_poledancer
		}
		name = DWWhoring5A
		# TODO .8
	}
	option = { #Special Options
		trigger = {
			has_global_flag = dw_jessica_created
			any_courtier = {
				has_character_flag = dw_npc_jessica
				NOT = { age = 40 }
			}
		}
		name = DWWhoring5D
		narrative_event = { id = DWWhoring.9 }
	}
}
# .6 Hole of Glory decision
narrative_event = {
	id = DWWhoring.6
	desc = DWWhoring6
	picture = brothel_gloryhole
	title = dw_visiting_brothel_title
	is_triggered_only = yes # .5
	option = { # Use the glory hole
		trigger = {
			has_cock = yes
		}
		name = DWWhoring6A
		wealth = -1
		# TODO
	}
	option = { # Work the glory hole
		name = DWWhoring6B
		hidden_tooltip = {
			work_hole_of_glory = yes
		}
	}
}
# .7 Mystery Room Event Selection (routing event)
character_event = {
	id = DWWhoring.7
	hide_window = yes # Nothing to see here
	is_triggered_only = yes # .5
	immediate = {
		# futa
		if = {
			limit = {
				trait = futa
			}
			random_list = {
				10 = { # A customer does a little S&M roleplay with a subservient man
					narrative_event = { id = DWWhoring.3005 }
				}
			}
			break = yes # exit out of the immediate block
		}
		# female
		if = {
			limit = {
				is_female = yes
			}
			random_list = {
				10 = { # 2 Succubus, 1 a futa, have their way with a blindfolded customer
					modifier = {
						factor = 0 # Needs to have gender bender and heaven/hell content on or we skip this
						NOR = {
							has_heaven_hell_content = yes
							has_gender_bender_content = yes
						}
					}
					modifier = {
						factor = 2 # twice as likely to happen is the customer fits some body types
						OR = {
							trait = huge_tits
							trait = enormous_tits
							trait = gigantic_tits
							race = irish # customer has red hair
						}
					}
					narrative_event = { id = DWWhoring.3000 }
				}
				10 = { # A customer is strung up while taken by a man wearing the mask of a Minotaur
					narrative_event = { id = DWWhoring.3001 }
				}
			}
			break = yes # exit out of the immediate block
		}
		# trap
		if = {
			limit = {
				trait = trap
			}
			random_list = { 
				10 = { # A customer is shackled and taken by two men
					modifier = {
						factor = 2 # twice as likely to happen is the customer fits some body types
						OR = {
							trait = tiny_dick
							trait = small_dick
						}
					}
					narrative_event = { id = DWWhoring.3003 }
				}
				10 = { # A customer is made to dress like a maid with a leash and then taken
					narrative_event = { id = DWWhoring.3004 }
				}
			}
			break = yes # exit out of the immediate block
		}
		# male
		if = {
			limit = {
				NOT = { is_female = yes }
			}
			random_list = {
				10 = {  # A customer takes a pregnant woman in a wedding outfit
					narrative_event = { id = DWWhoring.3002 }
				}
			}
			break = yes # exit out of the immediate block
		}
	}
}
# .9 Jessica Performance options
narrative_event = {
	id = DWWhoring.9
	desc = DWWhoring9
	picture = brothel_jessica_intro
	title = dw_jessica_performance_title
	is_triggered_only = yes # .5
	immediate = {
		random_courtier = {
			limit = {
				has_character_flag = dw_npc_jessica				
			}
			save_event_target_as = dw_jessica_target
		}
	}
	option = { # Relax and enjoy the show
		name = DWWhoring9A
		hidden_tooltip = {
			watch_jessica_performance = yes
		}
	}
	option = { # Seek Jessica's company
		name = DWWhoring9B
		hidden_tooltip = {
			seek_jessica_company_after_show = yes
		}
	}
}
# .10 Seeking female
narrative_event = {
	id = DWWhoring.10
	desc = "DWWhoring10"
	picture = brothel
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .1
	hide_from = yes # This is to avoid a potentially confusing target image from appearing
	immediate = {
		if = { # We check to see if we've a whore we can use
			limit = {
				location = {
					any_province_character = {
						OR = {
							trait = cheap_whore
							trait = experienced_whore
							trait = exclusive_whore
						}
						is_female = yes
						NOT = { trait = futa } # We don't want to accidentally grab a futa if the customer is only wanting a 'normal' female
						ai = yes #we don't want the player being pulled into these events against their will
					}
				}
			}
			#If there is, we then grab one for the event
			location = {
				random_province_character = {
					limit = {
						OR = {
							trait = cheap_whore
							trait = experienced_whore
							trait = exclusive_whore
						}
						NOT = { trait = futa } # We don't want to accidentally grab a futa if the customer is only wanting a 'normal' female
						is_female = yes
						ai = yes
					}
					save_event_target_as = dw_brothel_whore
				}
			}
		}
	}
	option = { # Named Whore is available to hook up with
		trigger = {
			event_target:dw_brothel_whore = { character = yes } # A check to see if there was a character successfully slotted into the position
		}
		name = DWWhoring10A
		event_target:dw_brothel_whore = {
			wealth = 2.5 # Payment after the brothel takes a cut, most importantly, by interacting with the event_target, their image is added to the option, making it clearer who the target is.
		}
		wealth = -5
		narrative_event = { id = DWWhoring.12 }
	}
	option = { # Commoner whore
		name = DWWhoring10B
		wealth = -2.5
		random_list = {
			50 = { # White stocking wearing whore - can handle male, female, futa
				narrative_event = { id = DWWhoring.12 }
			}
			50 = { # Futa customer wears out small titted whore
				modifier = {
					factor = 0 # zeroes out to not be an option if we've non-futa, or if they've a small sized dick
					NOT = { trait = futa }
					trait = tiny_dick
					trait = small_dick
				}
				narrative_event = { id = DWWhoring.120 }
			}
		}
	}
}
# .11 Routing check to first see if the whore selected is a spouse, blood relative, or a special race to redirect to different interaction options.
#TODO
# .12 Options with female whore (Customer)
narrative_event = {
	id = DWWhoring.12
	desc = {
		trigger = {
			event_target:dw_brothel_whore = { character = yes } # If we've a named whore available, we'll rock this description
		}
		text = "DWWhoring12_1"
	}
	desc = {
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }} # Ideally should trigger as true if the above doesn't
		}
		text = "DWWhoring12_2"
	}
	picture = brothel_female1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .10
	#Options that are for named whores
	option = { # Cock fucks female whore missionary style
		trigger = { # Male or futa
			event_target:dw_brothel_whore = { character = yes }
			OR = {
				is_female = no
				trait = futa
			}
		}
		name = DWWhoring12A
		narrative_event = { id = DWWhoring.100 }
	}
	option = { # Female
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
			is_female = yes
		}
		name = DWWhoring12B
		narrative_event = { id = DWWhoring.110 }
	}
	#Options that are for common whores
	option = { # Cock fucks female whore missionary style
		trigger = { # Male or futa
			NOT = { event_target:dw_brothel_whore = { character = yes }}
			OR = {
				is_female = no
				trait = futa
			}
		}
		name = DWWhoring12A
		narrative_event = { id = DWWhoring.100 }
	}
	option = { # Female
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
			is_female = yes
		}
		name = DWWhoring12B
		narrative_event = { id = DWWhoring.110 }
	}
}
# .20 Seeking male
narrative_event = {
	id = DWWhoring.20
	desc = "DWWhoring20"
	picture = brothel
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .1
	hide_from = yes # This is to avoid a potentially confusing target image from appearing
	immediate = {
		if = { # We check to see if we've a whore we can use
			limit = {
				location = {
					any_province_character = {
						OR = {
							trait = cheap_whore
							trait = experienced_whore
							trait = exclusive_whore
						}
						is_female = no
						ai = yes #we don't want the player being pulled into these events against their will
					}
				}
			}
			#If there is, we then grab one for the event
			location = {
				random_province_character = {
					limit = {
						OR = {
							trait = cheap_whore
							trait = experienced_whore
							trait = exclusive_whore
						}
						is_female = no
						ai = yes
					}
					save_event_target_as = dw_brothel_whore
				}
			}
		}
	}
	option = { # Named Whore is available to hook up with
		trigger = {
			event_target:dw_brothel_whore = { character = yes } # A check to see if there was a character successfully slotted into the position
		}
		name = DWWhoring20A
		event_target:dw_brothel_whore = {
			wealth = 2.5 # Payment after the brothel takes a cut, most importantly, by interacting with the event_target, their image is added to the option, making it clearer who the target is.
		}
		wealth = -5
		narrative_event = { id = DWWhoring.22 }
	}
	option = { # Commoner whore
		name = DWWhoring20B
		wealth = -2.5
		narrative_event = { id = DWWhoring.22 }
	}
}
# .21 Routing check to first see if the whore selected is a spouse, blood relative, or a special race to redirect to different interaction options.
#TODO
# .22 Options with male whore (Customer)
narrative_event = {
	id = DWWhoring.22
	desc = {
		trigger = {
			event_target:dw_brothel_whore = { character = yes } # If we've a named whore available, we'll rock this description
		}
		text = "DWWhoring22_1"
	}
	desc = {
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }} # Ideally should trigger as true if the above doesn't
		}
		text = "DWWhoring22_2"
	}
	picture = brothel_male1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .20
	#Options that are for named whores
	option = { # male fucked by male whore
		trigger = { # Male
			event_target:dw_brothel_whore = { character = yes }
			is_female = no
		}
		name = DWWhoring22A
		narrative_event = { id = DWWhoring.300 }
		hidden_tooltip = {
			event_target:dw_brothel_whore = {
				character_event = { id = DWCore.9200 } #Chance for homosexual trait to be obtained
			}
		}
	}
	option = { # Female fucked by male whore
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
			is_female = yes
		}
		name = DWWhoring22B
		narrative_event = { id = DWWhoring.310 }
	}
	#Options that are for common whores
	option = { # male fucked by male whore
		trigger = { # Male
			NOT = { event_target:dw_brothel_whore = { character = yes }}
			is_female = no
		}
		name = DWWhoring22A
		narrative_event = { id = DWWhoring.300 }
	}
	option = { # Female fucked by male whore
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
			is_female = yes
		}
		name = DWWhoring22B
		narrative_event = { id = DWWhoring.310 }
	}
}
# .30 Seeking futanari
narrative_event = {
	id = DWWhoring.30
	desc = "DWWhoring30"
	picture = brothel
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .1
	hide_from = yes # This is to avoid a potentially confusing target image from appearing
	immediate = {
		if = { # We check to see if we've a whore we can use
			limit = {
				location = {
					any_province_character = {
						OR = {
							trait = cheap_whore
							trait = experienced_whore
							trait = exclusive_whore
						}
						is_female = yes
						trait = futa
						ai = yes #we don't want the player being pulled into these events against their will
					}
				}
			}
			#If there is, we then grab one for the event
			location = {
				random_province_character = {
					limit = {
						OR = {
							trait = cheap_whore
							trait = experienced_whore
							trait = exclusive_whore
						}
						trait = futa
						is_female = yes
						ai = yes
					}
					save_event_target_as = dw_brothel_whore
				}
			}
		}
	}
	option = { # Named Whore is available to hook up with
		trigger = {
			event_target:dw_brothel_whore = { character = yes } # A check to see if there was a character successfully slotted into the position
		}
		name = DWWhoring30A
		event_target:dw_brothel_whore = {
			wealth = 2.5 # Payment after the brothel takes a cut, most importantly, by interacting with the event_target, their image is added to the option, making it clearer who the target is.
		}
		wealth = -5
		narrative_event = { id = DWWhoring.32 }
	}
	option = { # Commoner whore
		name = DWWhoring30B
		wealth = -2.5
		narrative_event = { id = DWWhoring.32 }
	}
}
# .31 Routing check to first see if the whore selected is a spouse, blood relative, or a special race to redirect to different interaction options.
#TODO
# .32 Options with futanari whore (Customer)
narrative_event = {
	id = DWWhoring.32
	desc = {
		trigger = {
			event_target:dw_brothel_whore = { character = yes } # If we've a named whore available, we'll rock this description
		}
		text = "DWWhoring32_1"
	}
	desc = {
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }} # Ideally should trigger as true if the above doesn't
		}
		text = "DWWhoring32_2"
	}
	picture = brothel_futa1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .30
	#Options that are for named whores
	option = { # male fucks futa whore
		trigger = { # cock fucks futa whore
			event_target:dw_brothel_whore = { character = yes }
			OR = {
				is_female = no
				trait = futa
			}
		}
		name = DWWhoring32A
		narrative_event = { id = DWWhoring.400 }
	}
	option = { # female fucked by futa whore
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
			is_female = yes
		}
		name = DWWhoring32B
		narrative_event = { id = DWWhoring.410 }
	}
	#Options that are for common whores
	option = { # Cock fucks futa whore
		trigger = { # Male or futa
			NOT = { event_target:dw_brothel_whore = { character = yes }}
			OR = {
				is_female = no
				trait = futa
			}
		}
		name = DWWhoring32A
		narrative_event = { id = DWWhoring.400 }
	}
	option = { # Female fucked by futa whore
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
			is_female = yes
		}
		name = DWWhoring32B
		narrative_event = { id = DWWhoring.410 }
	}
}
# .100 Female whore fucked by a cock, missionary
narrative_event = {
	id = DWWhoring.100
	desc = {
		trigger = { # is it a man with a named whore?
			is_female = no
			event_target:dw_brothel_whore = { character = yes }
		}
		text = "DWWhoring100_1"
	}
	desc = {
		trigger = { # is it a futa with a named whore?
			trait = futa
			event_target:dw_brothel_whore = { character = yes }
		}
		text = "DWWhoring100_2"
	}
	desc = {
		trigger = { # is it a man with a common whore?
			is_female = no
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		text = "DWWhoring100_3"
	}
	desc = {
		trigger = { # is it a futa with a common whore?
			trait = futa
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		text = "DWWhoring100_4"
	}
	picture = brothel_female_cock_missionary1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .12
	option = { # Cum inside named whore
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring100A"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
		event_target:dw_brothel_whore = {
			character_event = { id = DWCore.9000 } # Pregnancy check for the female
		}
	}
	option = { # Cum outside named whore
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring100B"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	option = { # Cum inside common whore
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring100C"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	option = { # Cum outside common whore
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring100D"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
}
# .110 Female whore finger bangs female customer
narrative_event = {
	id = DWWhoring.110
	desc = {
		trigger = { # named whore?
			event_target:dw_brothel_whore = { character = yes }
		}
		text = "DWWhoring110_1"
	}
	desc = {
		trigger = { # common whore
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		text = "DWWhoring110_2"
	}
	picture = brothel_female_female_fingerbang
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .12
	option = { # Named Whore end
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring110A"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	option = { # Unnamed Whore end
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring110B"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
}
# .120 Female common whore fucked by a futa customer
narrative_event = {
	id = DWWhoring.120
	desc = DWWhoring120
	picture = brothel_female_futa_fuck1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .12
	option = { # Finally I feel empty
		name = DWWhoring120A
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
}

## .300-399 Male specific whores
# .300 Male whore fucks male customer
narrative_event = {
	id = DWWhoring.300
	desc = {
		trigger = { # is it a named whore?
			event_target:dw_brothel_whore = { character = yes }
		}
		text = "DWWhoring300_1"
	}
	desc = {
		trigger = { # is it a common whore?
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		text = "DWWhoring300_2"
	}
	picture = brothel_male_male_fuck1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .22
	option = { # Cum inside customer
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring300A"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	option = { # Cum outside customer
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring300B"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	option = { # Cum inside customer
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring300C"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	option = { # Cum outside customer
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring300D"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
}
# .310 Male whore fucks female customer
narrative_event = {
	id = DWWhoring.310
	desc = {
		trigger = { # is it a named whore?
			event_target:dw_brothel_whore = { character = yes }
		}
		text = "DWWhoring310_1"
	}
	desc = {
		trigger = { # is it a common whore?
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		text = "DWWhoring310_2"
	}
	picture = brothel_female_cock_missionary1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .22
	## Named whore
	option = { # Cum inside customer
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring310A"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
		event_target:dw_brothel_whore = {
			character_event = { id = DWCore.9005 } # Pregnancy check for the customer
		}
	}
	option = { # Cum outside customer
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring310B"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	## Common whore
	option = { # Cum inside customer
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring310C"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
		character_event = { id = DWCore.9010 } # Pregnancy check for the customer
	}
	option = { # Cum outside customer
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring310D"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
}
## .400 - .499 Futa specific whores
# .400 Futa whore fucked by a male customer
narrative_event = {
	id = DWWhoring.400
	desc = {
		trigger = { # is it a named whore?
			event_target:dw_brothel_whore = { character = yes }
		}
		text = "DWWhoring400_1"
	}
	desc = {
		trigger = { # is it a common whore?
			is_female = no
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		text = "DWWhoring400_2"
	}
	picture = brothel_futa_male_fuck1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .32
	option = { # Cum inside named whore
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring400A"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
		event_target:dw_brothel_whore = {
			character_event = { id = DWCore.9000 } # Pregnancy check for the female
		}
	}
	option = { # Cum outside named whore
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring400B"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	option = { # Cum inside common whore
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring400C"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	option = { # Cum outside common whore
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring400D"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
}
# .410 Futa whore fucks female customer
narrative_event = {
	id = DWWhoring.410
	desc = {
		trigger = { # is it a named whore?
			event_target:dw_brothel_whore = { character = yes }
		}
		text = "DWWhoring410_1"
	}
	desc = {
		trigger = { # is it a common whore?
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		text = "DWWhoring410_2"
	}
	picture = brothel_female_cock_missionary1
	title = dw_visiting_brothel_title
	is_triggered_only = yes # Triggered by .32
	## Named whore
	option = { # Cum inside customer
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring410A"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
		event_target:dw_brothel_whore = {
			character_event = { id = DWCore.9005 } # Pregnancy check for the customer
		}
	}
	option = { # Cum outside customer
		trigger = {
			event_target:dw_brothel_whore = { character = yes }
		}
		name = "DWWhoring410B"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
	## Common whore
	option = { # Cum inside customer
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring410C"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
		character_event = { id = DWCore.9010 } # Pregnancy check for the customer
	}
	option = { # Cum outside customer
		trigger = {
			NOT = { event_target:dw_brothel_whore = { character = yes }}
		}
		name = "DWWhoring410D"
		add_character_modifier = {
			name = dw_good_sex
			duration = 30
		}		
	}
}

# .500 Whore offering services routing event
character_event = {
	id = DWWhoring.500
	is_triggered_only = yes # Triggered by decision
	hide_window = yes # Nothing to see here
	immediate = {
		# Potential Customer Selection
		if = { # We check for eligible male customers
			limit = {
				location = {
					any_province_character = {
						NOR = {
							trait = chaste
							trait = celibate
							trait = eunuch
							ai_zeal = 25
							ai_honor = 25
							ai_rationality = 25
						}
						is_female = no
						is_adult = yes
						ai = yes #we don't want the player being pulled into these events against their will
					}
				}
			}
			#If there is, we then grab one for the event
			location = {
				random_province_character = {
					limit = {
						NOR = {
							trait = chaste
							trait = celibate
							trait = eunuch
							ai_zeal = 25
							ai_honor = 25
							ai_rationality = 25
						}
						is_female = no
						is_adult = yes
						ai = yes
					}
					save_event_target_as = dw_brothel_male_john
				}
			}
		}
		if = { # We check for eligible non-futa female customers
			limit = {
				location = {
					any_province_character = {
						NOR = {
							trait = chaste
							trait = celibate
							trait = eunuch
							ai_zeal = 25
							ai_honor = 25
							ai_rationality = 25
							trait = futa
						}
						is_female = yes
						is_adult = yes
						ai = yes #we don't want the player being pulled into these events against their will
					}
				}
			}
			#If there is, we then grab one for the event
			location = {
				random_province_character = {
					limit = {
						NOR = {
							trait = chaste
							trait = celibate
							trait = eunuch
							ai_zeal = 25
							ai_honor = 25
							ai_rationality = 25
							trait = futa
						}
						is_female = yes
						is_adult = yes
						ai = yes
					}
					save_event_target_as = dw_brothel_female_jane
				}
			}
		}
		if = { # We check for eligible futa female customers
			limit = {
				location = {
					any_province_character = {
						NOR = {
							trait = chaste
							trait = celibate
							trait = eunuch
							ai_zeal = 25
							ai_honor = 25
							ai_rationality = 25
						}
						is_female = yes
						trait = futa
						is_adult = yes
						ai = yes #we don't want the player being pulled into these events against their will
					}
				}
			}
			#If there is, we then grab one for the event
			location = {
				random_province_character = {
					limit = {
						NOR = {
							trait = chaste
							trait = celibate
							trait = eunuch
							ai_zeal = 25
							ai_honor = 25
							ai_rationality = 25
						}
						is_female = yes
						trait = futa
						is_adult = yes
						ai = yes
					}
					save_event_target_as = dw_brothel_female_futa
				}
			}
		}
		# Working Whore Events
		if = { # If our whore is a female
			limit = {
				is_female = yes
			}
			random_list = {
				25 = { # Female gives blow-job to 2 johns (named)
					modifier = { # If we have no named John, this shouldn't be selected
						factor = 0
						NOT = { event_target:dw_brothel_male_john = { character = yes }}
					}
					narrative_event = { id = DWWhoring.600 }
				}
				25 = { # Female gets dp'd by 2 johns (named)
					modifier = { # If we have no named John, this shouldn't be selected
						factor = 0
						NOT = { event_target:dw_brothel_male_john = { character = yes }}
					}
					narrative_event = { id = DWWhoring.610 }
				}
				25 = { # Female eats out jane (named)
					modifier = { # If we have no named Jane, this shouldn't be selected
						factor = 0
						NOT = { event_target:dw_brothel_female_jane = { character = yes }}
					}
					narrative_event = { id = DWWhoring.620 }
				}
				100 = { # Female futa fucks jane and gets pegged (named)
					modifier = { # If we have no named Jane, then this shouldn't be selected
						factor = 0
						NOT = { event_target:dw_brothel_female_jane = { character = yes }}
					}
					modifier = { # If our working whore isn't a futa, then this shouldn't be selected
						factor = 0
						NOT = { trait = futa }
					}
					narrative_event = { id = DWWhoring.630 }
				}
				50 = { # Female gets fucked by futa (named)
					modifier = { # If we have no named futa, then this shouldn't be selected
						factor = 0
						NOT = { event_target:dw_brothel_female_futa = { character = yes }}
					}
					modifier = { # If our whore is a futa, then this shouldn't be selected
						factor = 0
						trait = futa
					}
					narrative_event = { id = DWWhoring.640 }
				}
				25 = { # Female gives tit job to commoner
					narrative_event = { id = DWWhoring.650 }
				}
				50 = { # Female gets fucked by 2 futas (named)
					modifier = { # If we have no named futa, then this shouldn't be selected
						factor = 0
						NOT = { event_target:dw_brothel_female_futa = { character = yes }}
					}
					modifier = { # If our whore is a futa, then this shouldn't be selected
						factor = 0
						trait = futa
					}
					narrative_event = { id = DWWhoring.660 }
				}
				100 = { # Female futa fucks john (named)
					modifier = { # If we have no named john, then this shouldn't be selected
						factor = 0
						NOT = { event_target:dw_brothel_male_john = { character = yes }}
					}
					modifier = { # If our working whore isn't a futa, then this shouldn't be selected
						factor = 0
						NOT = { trait = futa }
					}
					narrative_event = { id = DWWhoring.670 }
				}
				# TODO Random Events
			}
			break = yes # Take us out of the immediate block
		}
		if = { # If our whore is a male
			limit = {
				is_female = no
			}
			random_list = {
				50 = { # Trap gets fucked by commoner
					modifier = {
						factor = 0 # Not going to happen
						NOT = { trait = trap } # If the male whore is not a trap
					}
					narrative_event = { id = DWWhoring.900 }
				}
				50 = { # Male fucks female commoner
					modifier = {
						factor = 0.5 # Less likely to happen
						trait = trap # If the male whore is a trap
					}
					narrative_event = { id = DWWhoring.800 }
				}
			}
			# TODO Random Events
			break = yes # Take us out of the immediate block
		}
	}
}
## .600 Female Whores Working
# .600 Female working whore blows two cocks - male named customer
narrative_event = {
	id = DWWhoring.600
	desc = DWWhoring600
	picture = brothel_female_2cock_blow
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Money Earned
		name = DWWhoring600A
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 5 # Higher than normal due to two customers
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 10
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 15
		}
	}
}
# .610 Female working whore takes two cocks - male named customer
narrative_event = {
	id = DWWhoring.610
	desc = DWWhoring610
	picture = brothel_female_2cock_dp1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Instruct them to pull out
		name = DWWhoring610A
		random = { # Chance the customer ignores the request and cums inside anyway
			chance = 25 # 25% chance the plea is ignored
			narrative_event = { id = DWWhoring.611 }
		}
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 6 # Higher than normal due to two customers, and double-penetration
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 12
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 18
		}
	}
	option = { # Instruct them to fill me up
		name = DWWhoring610B
		event_target:dw_brothel_male_john = { 
			character_event = { id = DWCore.9005 } # Pregnancy check to see if john gets working whore pregnant.
		}
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 6 # Higher than normal due to two customers, and double-penetration
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 12
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 18
		}
	}
}
# .611 Female working whore takes two cocks - male named customer cums inside after being told not to do so.
narrative_event = {
	id = DWWhoring.611
	desc = DWWhoring611
	picture = brothel_creampie1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .610
	option = { # You bastard, you've defied my command
		trigger = {
			is_ruler = yes # If the worker is also a ruler, they can punish the one who came in them.
		}
		name = DWWhoring611A
		opinion = {
			modifier = dw_opinion_dynasty_assault
			who = event_target:dw_brothel_male_john
		}
		add_character_modifier = {
			name = dw_brothel_hypocrite_whore
			duration = 180 # six months
		}
	}
	option = { # Bah, what an asshole
		name = DWWhoring611B
		opinion = {
			modifier = dw_opinion_asshole
			who = event_target:dw_brothel_male_john
		}
	}
}
# .620 Female working whore eats pussy - named female
narrative_event = {
	id = DWWhoring.620
	desc = DWWhoring620
	picture = brothel_female_female_munch1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Money Earned
		name = DWWhoring620A
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 2.5 # standard rate
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 7.5
		}
	}
}
# .630 Female Futa working whore fucks female, while being pegged - female named customer
narrative_event = {
	id = DWWhoring.630
	desc = DWWhoring630
	picture = brothel_futa_group_fuck1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Fill the customer as requested
		name = DWWhoring630A
		event_target:dw_brothel_female_jane = { 
			character_event = { id = DWCore.9000 } # Pregnancy check to see if working futa gets the female customer pregnant
		}
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 5 # Higher than normal due to two customers
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 10
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 15
		}
	}
	option = { # Don't give the customer your seed
		name = DWWhoring630B
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 5 # Higher than normal due to two customers
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 10
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 15
		}
	}
}
# .640 Female working whore takes futa cock - futa named customer
narrative_event = {
	id = DWWhoring.640
	desc = DWWhoring640
	picture = brothel_female_cock_fuck1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Instruct them to pull out
		name = DWWhoring640A
		random = { # Chance the customer ignores the request and cums inside anyway
			chance = 25 # 25% chance the plea is ignored
			narrative_event = { id = DWWhoring.641 }
		}
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 2.5
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 7.5
		}
	}
	option = { # Instruct them to fill me up
		name = DWWhoring640B
		event_target:dw_brothel_female_futa = { 
			character_event = { id = DWCore.9005 } # Pregnancy check to see if futa gets working whore pregnant.
		}
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 2.5
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 7.5
		}
	}
}
# .641 Female working whore takes futa cock - futa named customer
narrative_event = {
	id = DWWhoring.641
	desc = DWWhoring641
	picture = brothel_creampie1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .640
	option = { # You bastard, you've defied my command
		trigger = {
			is_ruler = yes # If the worker is also a ruler, they can punish the one who came in them.
		}
		name = DWWhoring641A
		opinion = {
			modifier = dw_opinion_dynasty_assault
			who = event_target:dw_brothel_female_futa
		}
		add_character_modifier = {
			name = dw_brothel_hypocrite_whore
			duration = 180 # six months
		}
	}
	option = { # Bah, what an asshole
		name = DWWhoring641B
		opinion = {
			modifier = dw_opinion_asshole
			who = event_target:dw_brothel_female_futa
		}
	}
}
# .650 Female working whore gives tit job to commoner
narrative_event = {
	id = DWWhoring.650
	desc = DWWhoring650
	picture = brothel_female_male_titfuck1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Money Earned
		name = DWWhoring650A
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 2.5 # standard rate
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 7.5
		}
	}
}
# .660 Female working whore takes 2 futa cocks - futa named customer
narrative_event = {
	id = DWWhoring.660
	desc = DWWhoring660
	picture = brothel_female_2futa_dp1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Instruct them to pull out
		trigger = {
			intrigue = 10
		}
		name = DWWhoring660A
		tooltip_info = intrigue # Marks this as a special action, giving it a border if it is visible
		random = { # Chance the customer ignores the request and cums inside anyway
			chance = 25 # 25% chance the plea is ignored
			narrative_event = { id = DWWhoring.661 }
		}
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 5 # higher due to 2 customers
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 7.5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 15
		}
	}
	option = { # Instruct them to fill me up
		name = DWWhoring660B
		event_target:dw_brothel_female_futa = { 
			character_event = { id = DWCore.9005 } # Pregnancy check to see if futa gets working whore pregnant.
		}
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 5 # higher due to 2 customers
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 7.5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 15
		}
	}
}
# .661 Female working whore takes 2 futa cocks - futa named customer
narrative_event = {
	id = DWWhoring.661
	desc = DWWhoring661
	picture = brothel_creampie1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .660
	option = { # You bastard, you've defied my command
		trigger = {
			is_ruler = yes # If the worker is also a ruler, they can punish the one who came in them.
		}
		name = DWWhoring661A
		opinion = {
			modifier = dw_opinion_dynasty_assault
			who = event_target:dw_brothel_female_futa
		}
		add_character_modifier = {
			name = dw_brothel_hypocrite_whore
			duration = 180 # six months
		}
	}
	option = { # Bah, what an asshole
		name = DWWhoring661B
		opinion = {
			modifier = dw_opinion_asshole
			who = event_target:dw_brothel_female_futa
		}
	}
}
# .670 Female Futa working whore fucks male - male named customer
narrative_event = {
	id = DWWhoring.670
	desc = DWWhoring670
	picture = brothel_futa_male_fuck2
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Money Earned
		name = DWWhoring670A
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 2.5
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 7.5
		}
	}
}

## .800 Male Whore Working
# .800 Male fucks female - commoner customer
narrative_event = {
	id = DWWhoring.800
	desc = DWWhoring800
	picture = brothel_male_female_fuck1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Money Earned
		name = DWWhoring800A
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 2.5
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 7.5
		}
	}
}
## .900 Male Traps Working
# .900 Male Trap fucked - commoner customer
narrative_event = {
	id = DWWhoring.900
	desc = DWWhoring900
	picture = brothel_trap_male_fuck1
	title = dw_working_brothel_title
	hide_from = yes # Just in case the from window shows a different event target than who we're using
	is_triggered_only = yes # Triggered by .500
	option = { # Money Earned
		name = DWWhoring900A
		if = {
			limit = {
				trait = cheap_whore
			}
			wealth = 2.5
		}
		if = {
			limit = {
				trait = experienced_whore
			}
			wealth = 5
		}
		if = {
			limit = {
				trait = exclusive_whore
			}
			wealth = 7.5
		}
	}
}

# .999 Clear dw_whore_recovery flag
character_event = {
	id = DWWhoring.999
	hide_window = yes # Nothing to see here
	is_triggered_only = yes # Triggered by decision to clean up a flag assignment
	immediate = {
		clr_character_flag = dw_whore_recovery
	}
}

# .1000 Whore no more - liege requests a character stop whoring
character_event = {
	id = DWWhoring.1000
	hide_window = yes # Nothing to see here
	is_triggered_only = yes # Triggered by targeted decision
	immediate = {
		FROM = {
			save_event_target_as = dw_nomore_whore
		}
		if = { # If the whore has any of these traits or conditions, then they'll retire from whoring
			limit = {
				FROM = {
					OR = {
						trait = retired_whore # Shouldn't be possible to also have this, but just in case we'll include it here
						trait = chaste # conflicts with belief
						trait = celibate # conflicts with belief
						trait = monk # conflicts with belief
						trait = nun # conflicts with belief
						trait = angel # conflicts with belief
						trait = martial_cleric # conflicts with belief
						trait = scholarly_theologian # conflicts with belief
						trait = mastermind_theologian # conflicts with belief
						trait = zealous # conflicts with belief
						trait = depressed # heart not in it
						trait = victim # heart not in it
						trait = shy # too embarrassed
						trait = syphilitic # too sickly
						trait = has_tuberculosis # too sickly
						trait = has_typhoid_fever # too sickly
						trait = has_typhus # too sickly
						trait = has_bubonic_plague # too sickly
						trait = has_measles # too sickly
						trait = has_small_pox # too sickly
						trait = pneumonic # too sickly
						trait = leper # too sickly
						trait = infirm # too injured
						trait = maimed # too injured
						trait = incapable # unable
						trait = eunuch # unable
						trait = frog # unable
						age = 50 # too old for this shit
						trait = genius # risks outweigh rewards
						trait = quick # risks outweigh rewards
						trait = shrewd # risks outweigh rewards
						trait = scholar # risks outweigh rewards
						trait = theologian # risks outweigh rewards
						trait = mystic # risks outweigh rewards
						trait = mage # risks outweigh rewards
						trait = erudite # risks outweigh rewards
						trait = branded_slave # will obey their liege
						trait = content # will obey their liege
						trait = trusting # will obey their liege
						trait = pregnant # one bun in the oven is enough
						is_married = yes # Getting hitched keeps someone from working, in order to avoid headaches
					}
				}
			}
			narrative_event = { id = DWWhoring.1001 } # Whore retires
			break = yes # Take us out of the immediate block
		}
		# If we reach here, then it's not a guaranteed end to whoring.
		random_list = {
			#TODO Add modifiers to the percentages
			75 = { # 75% likely to stop
				narrative_event = { id = DWWhoring.1001 } # Whore retires
			}
			25 = { # 25% likely to keep on whoring
				narrative_event = { id = DWWhoring.1003 } # Whore keeps on whoring
			}
		}
	}
}
# .1001 Liege learns that the whore has agreed to retire
narrative_event = {
	id = DWWhoring.1001
	desc = DWWhoring1001
	picture = brothel
	title = dw_whore_nomore_title
	is_triggered_only = yes # Triggered by .1000
	option = { # Wonderful news
		name = DWWhoring1001A
		event_target:dw_nomore_whore = {
			remove_trait = cheap_whore
			remove_trait = experienced_whore
			remove_trait = exclusive_whore
			add_trait = retired_whore
		}
	}
}
# .1003 Liege learns that the whore has will keep whoring
narrative_event = {
	id = DWWhoring.1003
	desc = DWWhoring1003
	picture = brothel
	title = dw_whore_nomore_title
	is_triggered_only = yes # Triggered by .1000
	option = { # Wonderful news
		name = DWWhoring1003A
		event_target:dw_nomore_whore = {
			random = {
				chance = 25 # 25% they get the stubborn trait
				add_trait = stubborn
			}
		}
	}
}
# .1009 Retire from whoring via old age
character_event = {
	id = DWWhoring.1009
	min_age = 50 # 50 year olds or older pre-trigger requirement
	hide_window = yes # Nothing to see here
	is_triggered_only = yes # triggered via annual on_action pulse
	trigger = { # only need to check old whores
		OR = {
			trait = cheap_whore
			trait = experienced_whore
			trait = exclusive_whore
		}
		NOT = { trait = immortal }
	}
	immediate = {
		add_trait = retired_whore
		if ={
			limit = {
				trait = cheap_whore
			}
			remove_trait = cheap_whore
		}
		if ={
			limit = {
				trait = experienced_whore
			}
			remove_trait = experienced_whore
		}
		if ={
			limit = {
				trait = exclusive_whore
			}
			remove_trait = exclusive_whore
		}
	}
}
# .1100 Shantae Dancing
narrative_event = {
	id = DWWhoring.1100
	picture = brothel_shantae_dances
	title = dw_shantae_dancing_title
	is_triggered_only = yes # .1
	desc = { # First time seeing her
		trigger = {
			NOT = { has_character_flag = dw_saw_shantae }
		}
		text = DWWhoring1100.0
	}
	desc = { # Subsequent times seeing her
		trigger = {
			has_character_flag = dw_saw_shantae
		}
		text = DWWhoring1100.1
	}
	option = { # Join my court Shantae
		trigger = {
			NOT = { ai = yes }
		}
		name = DWWhoring1100A
		hidden_tooltip = { character_event = { id = DWWhoring.1101 } }
		custom_tooltip = { text = dw_add_npc_court }
	}
	option = { # Just relax and enjoy the show for the evening
		name = DWWhoring1100B
		if = {
			limit = {
				trait = stressed
			}
			remove_trait = stressed
		}
		hidden_tooltip = { 
			if = {
				limit = {
					NOT = { has_character_flag = dw_saw_shantae }
				}
			}
			set_character_flag = dw_saw_shantae 
		}
	}
	option = { # Go find me a whore
		name = DWWhoring1100C
		narrative_event = { id = DWWhoring.2 }
		hidden_tooltip = { 
			if = {
				limit = {
					NOT = { has_character_flag = dw_saw_shantae }
				}
			}
			set_character_flag = dw_saw_shantae 
		}
	}
}
# .1101 Shantae Created
character_event = {
	id = DWWhoring.1101
	hide_window = yes
	is_triggered_only = yes # .1100
	immediate = {
		create_character = {
		  random_traits = no
		  name = "Shantae"
		  religion = ROOT
		  culture = ROOT
		  race = egyptian_arabic
		  dna = akhgbhfbaah
		  female = yes
		  age = 17
		  attributes = {
			intrigue = 5
		  }
		  health = 5
		  fertility = 0.50
		  trait = flamboyant_schemer # Likes to keep herself entertained with a little drama
		  trait = fair # She is easy on the eyes
		  trait = lustful # She oozes sex, both literally and figuratively
		  trait = greedy # She likes wealth
		  trait = diligent # She's worked hard to get where she's at in life
		  trait = gregarious # Known to be a bit chatty
		  trait = big_tits # Larger than average... obviously
		  trait = portrait25 # Custom portrait for Shantae
		  trait = experienced_whore # She's not new to using what she has for financial gain
		}
		new_character = {
			set_character_flag = dw_boobs_checked
			set_character_flag = dw_npc_shantae
			set_global_flag = dw_created_shantae
			if = {  # For Christianity mod compatibility, to prevent a second set of tits getting assigned later
				limit = {
					has_global_flag = christ_enabled
				}
				set_character_flag = nada_checked
			}
		}
	}
}
# .2000 Glory Hole, Male working - 1
narrative_event = {
	id = DWWhoring.2000
	desc = DWWhoring2000
	picture = brothel_gloryhole_male1
	title = dw_gloryhole_title
	is_triggered_only = yes # Triggered by .6
	option = { # Easy money
		name = DWWhoring2000A
		hidden_tooltip = {
			calculate_gloryhole_payment = yes
		}
	}
}
# .2001 Glory Hole, Female working - 1
narrative_event = {
	id = DWWhoring.2001
	desc = DWWhoring2001
	picture = brothel_gloryhole_female1
	title = dw_gloryhole_title
	is_triggered_only = yes # Triggered by .6
	option = { # Easy money
		name = DWWhoring2001A
		hidden_tooltip = {
			calculate_gloryhole_payment = yes
		}
	}
}
# .3000 Mystery Room, female customer - 1
narrative_event = {
	id = DWWhoring.3000
	desc = DWWhoring3000
	picture = brothel_mystery_female1
	title = dw_mystery_room_visit_title
	is_triggered_only = yes # Triggered by .7
	option = { # Fuck, I'm wiped out
		name = DWWhoring3000A
		add_character_modifier = { name = dw_brothel_mystery_room_survivor duration = 60 }
	}
}
# .3001 Mystery Room, female customer - 2
narrative_event = {
	id = DWWhoring.3001
	desc = DWWhoring3001
	picture = brothel_mystery_female2
	title = dw_mystery_room_visit_title
	is_triggered_only = yes # Triggered by .7
	option = { # Fuck, I'm wiped out
		name = DWWhoring3001A
		add_character_modifier = { name = dw_brothel_mystery_room_survivor duration = 60 }
	}
}
# .3002 Mystery Room, male customer - 1
narrative_event = {
	id = DWWhoring.3002
	desc = DWWhoring3002
	picture = brothel_mystery_male1
	title = dw_mystery_room_visit_title
	is_triggered_only = yes # Triggered by .7
	option = { # Fuck, I'm wiped out
		name = DWWhoring3002A
		add_character_modifier = { name = dw_brothel_mystery_room_survivor duration = 60 }
	}
}
# .3003 Mystery Room, trap customer - 1
narrative_event = {
	id = DWWhoring.3003
	desc = DWWhoring3003
	picture = brothel_mystery_trap1
	title = dw_mystery_room_visit_title
	is_triggered_only = yes # Triggered by .7
	option = { # Fuck, I'm wiped out
		name = DWWhoring3003A
		add_character_modifier = { name = dw_brothel_mystery_room_survivor duration = 60 }
	}
}
# .3004 Mystery Room, trap customer - 2
narrative_event = {
	id = DWWhoring.3004
	desc = DWWhoring3004
	picture = brothel_mystery_trap2
	title = dw_mystery_room_visit_title
	is_triggered_only = yes # Triggered by .7
	option = { # Fuck, I'm wiped out
		name = DWWhoring3004A
		add_character_modifier = { name = dw_brothel_mystery_room_survivor duration = 60 }
	}
}
# .3005 Mystery Room, futa customer - 1
narrative_event = {
	id = DWWhoring.3005
	desc = DWWhoring3005
	picture = brothel_mystery_futa1
	title = dw_mystery_room_visit_title
	is_triggered_only = yes # Triggered by .7
	option = { # Fuck, I'm wiped out
		name = DWWhoring3005A
		add_character_modifier = { name = dw_brothel_mystery_room_survivor duration = 60 }
	}
}
# .5000 Jessica - Performance 1
narrative_event = {
	id = DWWhoring.5000
	desc = DWWhoring5000
	picture = brothel_jessica_nips
	title = dw_jessica_performance_title
	is_triggered_only = yes # Triggered by .9
	option = { # What a great show
		name = DWWhoring5000A
		hidden_tooltip = {
			assign_jessica_show_outcome = yes
		}
		custom_tooltip = {
			text = dw_jessica_outcome_tip
		}
	}
}
# .5001 Jessica - Performance 2
narrative_event = {
	id = DWWhoring.5001
	desc = DWWhoring5001
	picture = brothel_jessica_strip1
	title = dw_jessica_performance_title
	is_triggered_only = yes # Triggered by .9
	option = { # What a great show
		name = DWWhoring5001A
		hidden_tooltip = {
			assign_jessica_show_outcome = yes
		}
		custom_tooltip = {
			text = dw_jessica_outcome_tip
		}
	}
}
# .5002 Jessica - Performance 3 - Easter Egg (Halloween event)
narrative_event = {
	id = DWWhoring.5002
	desc = DWWhoring5002
	picture = brothel_jessica_halloween1
	title = dw_jessica_performance_title
	is_triggered_only = yes # Triggered by .9
	option = { # What a great show
		name = DWWhoring5002A
		add_character_modifier = {
			name = dw_easter_egg_buff
			duration = 180
		}
	}
}
# .5003 Jessica - Company 1 - Relaxing smoke
narrative_event = {
	id = DWWhoring.5003
	desc = DWWhoring5003
	picture = brothel_jessica_seduce1
	title = dw_jessica_performance_title
	is_triggered_only = yes # Triggered by .9
	option = { # Don't push the issue
		name = DWWhoring5003A
		event_target:dw_jessica_target = {
			opinion = {
				modifier = dw_respected_request
				who = ROOT
			}
		}
	}
	option = { # Bribery attempt
		name = DWWhoring5003B
		custom_tooltip = {
			text = dw_bribery_attempt
		}
		hidden_tooltip = {
			determine_jessica_bribery_attempt = yes
		}
	}	
}
# .5004 Jessica - Fuck-off! (Failed Bribery)
narrative_event = {
	id = DWWhoring.5004
	desc = DWWhoring5004
	picture = brothel_jessica_fuckoff
	title = dw_jessica_performance_title
	is_triggered_only = yes # Triggered by scripted_effect
	option = { # Well that ended poorly
		name = DWWhoring5004A
		event_target:dw_jessica_target = {
			opinion = {
				modifier = dw_tried_to_bribe_me
				who = ROOT
			}
		}
		opinion = {
			modifier = dw_bribe_refused
			who = event_target:dw_jessica_target
		}
	}
}
# .5005 Jessica - Successful visit - female
narrative_event = {
	id = DWWhoring.5005
	desc = DWWhoring5005
	picture = brothel_jessica_female1
	title = dw_jessica_performance_title
	is_triggered_only = yes # Triggered by scripted_effect
	option = { # That's my girl
		name = DWWhoring5005A
		event_target:dw_jessica_target = {
			opinion = {
				modifier = dw_took_bribe
				who = ROOT
			}
		}
		opinion = {
			modifier = dw_accepted_my_bribe
			who = event_target:dw_jessica_target
		}
	}
}
# .5010 Jessica already has company (gang bang option)
narrative_event = {
	id = DWWhoring.5010
	desc = DWWhoring5010
	picture = brothel_jessica_backstage1
	title = dw_jessica_performance_title
	is_triggered_only = yes # Triggered by scripted_effect
	option = { # Join the fun
		name = DWWhoring5010A
		hidden_effect = { narrative_event = { id = DWWhoring.5012 } }
	}
	option = { # I'll pass
		name = DWWhoring5010B
	}
}
# .5012 Jessica already has company (gang bang accepted)
narrative_event = {
	id = DWWhoring.5012
	desc = DWWhoring5012
	picture = brothel_jessica_group1
	title = dw_jessica_performance_title
	is_triggered_only = yes # Triggered by scripted_effect
	immediate = {
		ROOT = { save_event_target_as = new_dad }
		event_target:dw_jessica_target = { save_event_target_as = new_mom }
	}
	option = { # Cum inside
		name = DWWhoring5012A
		hidden_effect = { impregnate_check_standard = yes }
	}
	option = { # Cum outside
		name = DWWhoring5012B
	}
}
