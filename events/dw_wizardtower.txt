namespace = dw_wizardtower

# Wizard Tower Sentry
narrative_event = {
    id = dw_wizardtower.01
    is_triggered_only = yes
	desc = dw_wizardtower01
	picture = wizard_tower_01
	window = "BiggerEventWindow"
	title = wizard_tower_title
    option = { # Seek training to become a mage
        trigger = {
            learning = 10
            NOT = { has_character_flag = dw_mage_training }
        }
        name = dw_wizardtower01a
        narrative_event = { id = dw_wizardtower.200 }
        ai_chance = { factor = 20 }
    }
    option = { # Let me see your wares
        trigger = { wealth = 10 }
        name = dw_wizardtower01b
        narrative_event = { id = dw_wizardtower.300 }
        ai_chance = { factor = 50 } # It's what most NPC visitors come to do
    }
    option = { # I'd like to recruit a mage
        trigger = { wealth = 10 }
        name = dw_wizardtower01c
        narrative_event = { id = dw_wizardtower.100 }
        ai_chance = {
            factor = 20
            modifier = { # No one should be recruting if they're not a ruler of some kind
                factor = 0
                NOT = { is_ruler = yes }
            }
        }
    }
    option = { # Nevermind
        name = dw_wizardtower01d
        ai_chance = { factor = 10 }
    }
}

# Recruit a magic user
narrative_event = {
    id = dw_wizardtower.100
    is_triggered_only = yes
	desc = dw_wizardtower100
	picture = wizard_tower_02
	window = "BiggerEventWindow"
	title = wizard_tower_recruit_title
    option = { # Random recruit
        name = dw_wizardtower100a
        wealth = -10
        custom_tooltip = { text = dw_recruit_random_mage }
        hidden_tooltip = {
            dw_create_a_magicuser = yes
        }
    }
    option = { # Scarlet Witch
        trigger = { # checking to see if character is already in play
            has_dw_herovillain_content = yes
			NOT = {
				OR = {
					has_global_flag = dw_npc_ignore_scarletwitch
					has_global_flag = dw_npc_scarletwitch_alive
				}
			}
		}
        name = dw_wizardtower100b
        wealth = -10
        narrative_event = { id = dw_wizardtower.101}
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Raven
        trigger = { # checking to see if character is already in play
            has_dw_herovillain_content = yes
            has_heaven_hell_content = yes # Raven is a demon-kin
			NOT = {
				OR = {
					has_global_flag = dw_npc_ignore_raven
					has_global_flag = dw_npc_raven_alive
				}
			}
		}
        name = dw_wizardtower100c
        wealth = -10
        narrative_event = { id = dw_wizardtower.102}
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Hermione
		trigger = {
			NOT = {
                OR = {
                    has_global_flag = dw_npc_hermione_alive
                    has_global_flag = dw_npc_ignore_hermione
                }
            }
		}
		name = dw_wizardtower100d
		narrative_event = { id = dw_wizardtower.103 }
	}
	option = { # Sorcey
		trigger = {
            OR = {
                has_global_flag = dw_npc_sorcey_alive
                has_global_flag = dw_npc_ignore_sorcey
            }
		}
		name = dw_wizardtower100e
		narrative_event = { id = dw_wizardtower.104 }
	}
    option = { # Nevermind
        name = dw_wizardtower100end
    }
}
# Recruit Scarlet Witch
narrative_event = {
    id = dw_wizardtower.101
    is_triggered_only = yes
	desc = dw_wizardtower101
	picture = scarletwitch_01
	window = "BiggerEventWindow"
	title = scarletwitch_title
    immediate = {
        dw_create_scarletwitch = yes
    }
    option = { # Welcome to my court
        trigger = { NOT = { trait = villain } } # For heroes or neutral players
        name = dw_wizardtower101a
        hidden_tooltip = {
            event_target:dw_scarletwitch_recruit = { add_trait = hero }
        }
    }
    option = { # Welcome to my court
        trigger = { trait = villain }
        name = dw_wizardtower101a
        hidden_tooltip = {
            event_target:dw_scarletwitch_recruit = { add_trait = villain }
        }
    }
    option = { # Go experience the world
        name = dw_wizardtower101b
        hidden_tooltip = {
            event_target:dw_scarletwitch_recruit = { banish = yes }
        }
    }
    option = { # Never bother me again
		name = dw_wizardtower101c
		set_global_flag = dw_npc_ignore_scarletwitch
		hidden_tooltip = {
			clr_global_flag = dw_npc_scarletwitch_alive
			event_target:dw_scarletwitch_recruit = {
				death = { death_reason = death_vanished }
			}
		}
	}
}
# Recruit Raven
narrative_event = {
	id = dw_wizardtower.102
	is_triggered_only = yes
	desc = dw_wizardtower102
	picture = raven_01
	window = "BiggerEventWindow"
	title = dw_raven_title
	immediate = {
		dw_create_raven = yes
	}
    option = { # Welcome to my court
        trigger = { NOT = { trait = villain } } # For heroes or neutral players
        name = dw_wizardtower102a
        hidden_tooltip = {
            event_target:dw_raven_recruit = { add_trait = hero }
        }
    }
    option = { # Welcome to my court
        trigger = { trait = villain }
        name = dw_wizardtower102a
        hidden_tooltip = {
            event_target:dw_raven_recruit = { add_trait = villain }
        }
    }
	option = { # Banish
		name = dw_wizardtower102b
		event_target:dw_raven_recruit = { banish = yes }
	}
	option = { # Never bother me again
		name = dw_wizardtower102c
		set_global_flag = dw_npc_ignore_raven
		hidden_tooltip = {
			clr_global_flag = dw_npc_raven_alive
			event_target:dw_raven_recruit = {
				death = { death_reason = death_vanished }
			}
		}
	}
}
# Recruit Hermioine
narrative_event = {
	id = dw_wizardtower.103
	desc = dw_wizardtower103
	picture = wizard_hermione
	title = dw_wizard_tower_ruler_visit
	is_triggered_only = yes
	immediate = {
        dw_create_hermione = yes
	}
	option = { # Welcome Hermione
		name = dw_wizardtower103a
		hidden_tooltip = {
			character_event = { id = dw_wizardtower.5250 days = 360 } # We check it a year from now
		}
	}
    option = { # Banish
		name = dw_wizardtower103b
		event_target:dw_target_hermione = { banish = yes }
	}
	option = { # Never bother me again
		name = dw_wizardtower103c
		set_global_flag = dw_npc_ignore_hermione
		hidden_tooltip = {
			clr_global_flag = dw_npc_hermione_alive
			event_target:dw_target_hermione = {
				death = { death_reason = death_vanished }
			}
		}
	}
}
# Recruit Sorcey
narrative_event = {
	id = dw_wizardtower.104
	desc = dw_wizardtower104
	picture = wizard_sorcey
	title = dw_wizard_tower_ruler_visit
	is_triggered_only = yes
	immediate = {
        dw_create_sorcey = yes
	}
	option = { # Welcome Sorcey
		name = dw_wizardtower104a
	}
    option = { # Banish
		name = dw_wizardtower103b
		event_target:dw_target_sorcey = { banish = yes }
	}
	option = { # Never bother me again
		name = dw_wizardtower103c
		set_global_flag = dw_npc_ignore_sorcey
		hidden_tooltip = {
			clr_global_flag = dw_npc_sorcey_alive
			event_target:dw_target_sorcey = {
				death = { death_reason = death_vanished }
			}
		}
	}
}

# Training at the Wizard Tower
narrative_event = {
    id = dw_wizardtower.200
    is_triggered_only = yes
	desc = {
        trigger = { NOT = { trait = mage } }
        text = dw_wizardtower200.0
    }
    desc = {
        trigger = { trait = mage }
        text = dw_wizardtower200.1
    }
	picture = wizard_tower_07
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # Alright, let's do this
        trigger = { NOT = { trait = mage } }
        name = dw_wizardtower200a
        narrative_event = { id = dw_wizardtower.201 }
    }
    option = { # Transmutation Magic
        trigger = {
            trait = mage
            NOT = { has_character_modifier = dw_transmutation_mage }
        }
        name = dw_wizardtower200b
        narrative_event = { id = dw_wizardtower.210 }
    }
    option = { # Evocation Magic
        trigger = {
            trait = mage
            NOT = { has_character_modifier = dw_evocation_mage }
        }
        name = dw_wizardtower200c
        narrative_event = { id = dw_wizardtower.220 }
    }
    option = { # Necromancy Magic
        trigger = {
            trait = mage
            NOT = { has_character_modifier = dw_necromancer_mage }
        }
        name = dw_wizardtower200d
        narrative_event = { id = dw_wizardtower.230 }
    }
    option = { # Summoning Magic
        trigger = {
            trait = mage
            NOT = { has_character_modifier = dw_summoner_mage }
        }
        name = dw_wizardtower200e
        narrative_event = { id = dw_wizardtower.240 }
    }
    option = { # I've nothing left to learn
        trigger = {
            trait = mage
            has_character_modifier = dw_transmutation_mage
            has_character_modifier = dw_summoner_mage
            has_character_modifier = dw_necromancer_mage
            has_character_modifier = dw_evocation_mage
        }
        name = dw_wizardtower200end
    }
}
# Training at the Wizard Tower : Mage materials
narrative_event = {
    id = dw_wizardtower.201
    is_triggered_only = yes
	desc = dw_wizardtower201
	picture = wizard_tower_08
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # Thank you
        name = dw_wizardtower201a
        hidden_tooltip = {
            set_character_flag = dw_mage_training
            narrative_event = { id = dw_wizardtower.202 days = 100 random = 30 }
        }
    }
}
# Training at the Wizard Tower : First Decision
narrative_event = {
    id = dw_wizardtower.202
    is_triggered_only = yes
	desc = dw_wizardtower202
	picture = wizard_tower_09
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.203 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.203 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.203 days = 80 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.203 days = 30 random = 30 }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.203 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Second Decision
narrative_event = {
    id = dw_wizardtower.203
    is_triggered_only = yes
	desc = dw_wizardtower203
	picture = wizard_tower_10
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.204 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.204 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.204 days = 80 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.204 days = 30 random = 30 }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.204 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Training complete
narrative_event = {
    id = dw_wizardtower.204
    is_triggered_only = yes
	desc = {
        text = dw_wizardtower204
        picture = wizard_tower_11
        trigger = { is_female = no }
    }
    desc = {
        text = dw_wizardtower204
        picture = wizard_tower_12
        trigger = { is_female = yes }
    }
	picture = oops
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I am now a mage
        name = dw_wizardtower204a
        add_trait = mage
        clr_character_flag = dw_mage_training
    }
}
# Training at the Wizard Tower : Transmutation Specialist
narrative_event = {
    id = dw_wizardtower.210
    is_triggered_only = yes
	desc = dw_wizardtower210
	picture = wizard_tower_15
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I'm ready to being my training
        name = dw_wizardtower210a
        set_character_flag = dw_mage_training
        custom_tooltip = { text = dw_mage_specialization_training_tooltip }
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.211 days = 100 random = 30 }
        }
    }
}
# Training at the Wizard Tower : Transmutation: First Decision
narrative_event = {
    id = dw_wizardtower.211
    is_triggered_only = yes
	desc = dw_wizardtower211
	picture = wizard_tower_16
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.212 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.212 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.212 days = 80 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.212 days = 30 random = 30 }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.212 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Transmutation: Second Decision
narrative_event = {
    id = dw_wizardtower.212
    is_triggered_only = yes
	desc = dw_wizardtower212
	picture = wizard_tower_17
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.213 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.213 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.213 days = 80 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.213 days = 30 random = 30 }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.213 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Transmutation Training complete
narrative_event = {
    id = dw_wizardtower.213
    is_triggered_only = yes
	desc = dw_wizardtower213
	picture = wizard_tower_18
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I am now a mage
        name = dw_wizardtower213a
        add_character_modifier = { modifier = dw_transmutation_mage duration = -1 }
        clr_character_flag = dw_mage_training
    }
}
# Training at the Wizard Tower : Evocation Specialist
narrative_event = {
    id = dw_wizardtower.220
    is_triggered_only = yes
	desc = dw_wizardtower220
	picture = wizard_tower_28
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I'm ready to being my training
        name = dw_wizardtower210a
        set_character_flag = dw_mage_training
        custom_tooltip = { text = dw_mage_specialization_training_tooltip }
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.221 days = 100 random = 30 }
        }
    }
}
# Training at the Wizard Tower : Evocation: First Decision
narrative_event = {
    id = dw_wizardtower.221
    is_triggered_only = yes
	desc = dw_wizardtower221
	picture = wizard_tower_29
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.222 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.222 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            random_list = {
                75 = { narrative_event = { id = dw_wizardtower.222 days = 80 random = 30 } } # Success
                25 = { narrative_event = { id = dw_wizardtower.224 days = 30 random = 30 } } # Failed
            }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            random_list = {
                80 = { narrative_event = { id = dw_wizardtower.222 days = 30 random = 30 } } # Success
                20 = { narrative_event = { id = dw_wizardtower.224 days = 10 random = 20 } } # Failed
            }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.222 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Evocation: Second Decision
narrative_event = {
    id = dw_wizardtower.222
    is_triggered_only = yes
	desc = dw_wizardtower222
	picture = wizard_tower_30
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.223 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.223 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            random_list = {
                75 = { narrative_event = { id = dw_wizardtower.223 days = 80 random = 30 } } # Success
                25 = { narrative_event = { id = dw_wizardtower.225 days = 30 random = 30 } } # Failed
            }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            random_list = {
                80 = { narrative_event = { id = dw_wizardtower.223 days = 30 random = 30 } } # Success
                20 = { narrative_event = { id = dw_wizardtower.225 days = 10 random = 20 } } # Failed
            }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.223 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Evocation Training complete
narrative_event = {
    id = dw_wizardtower.223
    is_triggered_only = yes
	desc = dw_wizardtower223
	picture = wizard_tower_31
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I am now a mage
        name = dw_wizardtower223a
        add_character_modifier = { modifier = dw_evocation_mage duration = -1 }
        clr_character_flag = dw_mage_training
    }
}
# Training at the Wizard Tower : Evocation: First Decision - Failed Push
narrative_event = {
    id = dw_wizardtower.224
    is_triggered_only = yes
	desc = dw_wizardtower224
	picture = wizard_tower_35
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I must be more careful
        name = dw_wizardtower224a
        random_demesne_province = {
            limit = { num_of_settlements = 1 }
            random_province_holding = {
    			limit = { num_of_buildings = 1 }
    			destroy_random_building = yes
    		}
        }
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.222 days = 90 random = 30 }
        }
    }
}
# Training at the Wizard Tower : Evocation: Second Decision - Failed Push
narrative_event = {
    id = dw_wizardtower.225
    is_triggered_only = yes
	desc = dw_wizardtower225
	picture = wizard_tower_35
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I must be more careful
        name = dw_wizardtower225a
        random_demesne_province = {
            limit = { num_of_settlements = 1 }
            random_province_holding = {
    			limit = { num_of_buildings = 1 }
    			destroy_random_building = yes
    		}
        }
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.223 days = 90 random = 30 }
        }
    }
}
# Training at the Wizard Tower : Necromancy Specialist
narrative_event = {
    id = dw_wizardtower.230
    is_triggered_only = yes
	desc = dw_wizardtower230
	picture = wizard_tower_19
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I'm ready to being my training
        name = dw_wizardtower210a
        set_character_flag = dw_mage_training
        custom_tooltip = { text = dw_mage_specialization_training_tooltip }
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.231 days = 100 random = 30 }
        }
    }
}
# Training at the Wizard Tower : Necromancy: First Decision
narrative_event = {
    id = dw_wizardtower.231
    is_triggered_only = yes
	desc = dw_wizardtower231
	picture = wizard_tower_20
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.232 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.232 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.232 days = 80 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.232 days = 30 random = 30 }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.232 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Necromancy: Second Decision
narrative_event = {
    id = dw_wizardtower.232
    is_triggered_only = yes
	desc = dw_wizardtower232
	picture = wizard_tower_21
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.233 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.233 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.233 days = 80 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.233 days = 30 random = 30 }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.233 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Necromancy Training complete
narrative_event = {
    id = dw_wizardtower.233
    is_triggered_only = yes
	desc = dw_wizardtower233
	picture = wizard_tower_22
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I am now a mage
        name = dw_wizardtower233a
        add_character_modifier = { modifier = dw_necromancer_mage duration = -1 }
        clr_character_flag = dw_mage_training
    }
}
# Training at the Wizard Tower : Summoner Specialist
narrative_event = {
    id = dw_wizardtower.240
    is_triggered_only = yes
	desc = dw_wizardtower240
	picture = wizard_tower_23
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I'm ready to being my training
        name = dw_wizardtower210a
        set_character_flag = dw_mage_training
        custom_tooltip = { text = dw_mage_specialization_training_tooltip }
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.241 days = 100 random = 30 }
        }
    }
}
# Training at the Wizard Tower : Summoner: First Decision
narrative_event = {
    id = dw_wizardtower.241
    is_triggered_only = yes
	desc = dw_wizardtower241
	picture = wizard_tower_24
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.242 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.242 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            random_list = {
                75 = { narrative_event = { id = dw_wizardtower.242 days = 80 random = 30 } } # Success
                25 = { narrative_event = { id = dw_wizardtower.244 days = 30 random = 30 } } # Failure
            }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            random_list = {
                80 = { narrative_event = { id = dw_wizardtower.242 days = 30 random = 30 } } # Success
                20 = { narrative_event = { id = dw_wizardtower.244 days = 10 random = 30 } } # Failure
            }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.242 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Summoner: Second Decision
narrative_event = {
    id = dw_wizardtower.242
    is_triggered_only = yes
	desc = dw_wizardtower242
	picture = wizard_tower_26
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall stay the course
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        tooltip_info = genius
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.243 days = 50 random = 30 }
        }
    }
    option = { # I shall stay the course
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.243 days = 110 random = 30 }
        }
    }
    option = { # I shall push myself
        trigger = {
            NOT = { trait = genius }
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            random_list = {
                75 = { narrative_event = { id = dw_wizardtower.243 days = 80 random = 30 } } # Success
                25 = { narrative_event = { id = dw_wizardtower.245 days = 30 random = 30 } } # Failure
            }
        }
    }
    option = { # I shall push myself
        trigger = {
            trait = genius
            NOT = { trait = slothful }
        }
        name = dw_wizardtower202b
        hidden_tooltip = {
            random_list = {
                80 = { narrative_event = { id = dw_wizardtower.243 days = 30 random = 30 } } # Success
                20 = { narrative_event = { id = dw_wizardtower.245 days = 10 random = 30 } } # Failure
            }
        }
    }
    option = { # What's the hurry
        trigger = { trait = slothful }
        name = dw_wizardtower202c
        tooltip_info = slothful
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.243 days = 180 random = 60 }
        }
    }
}
# Training at the Wizard Tower : Summoner Training complete
narrative_event = {
    id = dw_wizardtower.243
    is_triggered_only = yes
	desc = dw_wizardtower243
	picture = wizard_tower_27
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I am now a mage
        name = dw_wizardtower243a
        add_character_modifier = { modifier = dw_summoner_mage duration = -1 }
        clr_character_flag = dw_mage_training
    }
}
# Training at the Wizard Tower : Summoner: First Decision - Failed Push
narrative_event = {
    id = dw_wizardtower.244
    is_triggered_only = yes
	desc = dw_wizardtower244
	picture = wizard_tower_25
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall be careful
        name = dw_wizardtower244a
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.242 days = 90 random = 30 }
        }
    }
}
# Training at the Wizard Tower : Summoner: Second Decision - Failed Push
narrative_event = {
    id = dw_wizardtower.245
    is_triggered_only = yes
	desc = dw_wizardtower245
	picture = wizard_tower_25
	window = "BiggerEventWindow"
	title = wizard_training_title
    option = { # I shall be careful
        name = dw_wizardtower245a
        random_list = {
            25 = { add_trait = lunatic }
            25 = { add_trait = possessed }
            50 = { } # Nothing happens
        }
        hidden_tooltip = {
            narrative_event = { id = dw_wizardtower.243 days = 90 random = 30 }
        }
    }
}
# Shopping at the Wizard Tower
narrative_event = {
    id = dw_wizardtower.300
    is_triggered_only = yes
	desc = dw_wizardtower300
	picture = wizard_tower_04
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    immediate = {
        # Random Roll - to help select what appears for sale
    }
    option = { # Potions and ingredients
        name = dw_wizardtower300a
        narrative_event = { id = dw_wizardtower.301 }
    }
    option = { # Books and Scrolls
        name = dw_wizardtower300b
        narrative_event = { id = dw_wizardtower.302 }
    }
    option = { # Other items
        name = dw_wizardtower300c
        narrative_event = { id = dw_wizardtower.303 }
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Nevermind
        name = dw_wizardtower300end
    }
}
# Shopping at the Wizard Tower: Potions and ingredients
narrative_event = {
    id = dw_wizardtower.301
    is_triggered_only = yes
	desc = dw_wizardtower301
	picture = wizard_tower_04
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Transmutation Potions
        name = dw_wizardtower301a
        narrative_event = { id = dw_wizardtower.305 }
    }
    option = { # Other Potions
        name = dw_wizardtower301b
        narrative_event = { id = dw_wizardtower.304 }
    }
    option = { # Hermetic Ingredients
        name = dw_wizardtower301c
        narrative_event = { id = dw_wizardtower.306 }
    }
    option = { # Nevermind
        name = dw_wizardtower300end
    }
}
# Shopping at the Wizard Tower: Books and Scrolls
narrative_event = {
    id = dw_wizardtower.302
    is_triggered_only = yes
	desc = dw_wizardtower302
	picture = wizard_tower_04
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Book 1
        trigger = { has_character_flag = dw_tower_wares_01 }
        name = dw_wizardtower302a
        wealth = -10
        add_artifact = how_to_write_a_letter
    }
    option = { # Book 2
        trigger = { has_character_flag = dw_tower_wares_02 }
        name = dw_wizardtower302a
        wealth = -15
        add_artifact = human_anatomy
    }
    option = { # Book 3
        trigger = { has_character_flag = dw_tower_wares_03 }
        name = dw_wizardtower302a
        wealth = -25
        add_artifact = the_illiad
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Book 4
        trigger = { has_character_flag = dw_tower_wares_04 }
        name = dw_wizardtower302a
        wealth = -50
        add_artifact = the_odyssey
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Scroll 1
        trigger = { has_character_flag = dw_tower_wares_01 }
        name = dw_wizardtower302b
        wealth = -10
        add_artifact = dw_human_health_scroll
    }
    option = { # Scroll 2
        trigger = { has_character_flag = dw_tower_wares_02 }
        name = dw_wizardtower302b
        wealth = -15
        add_artifact = ancient_engineering_scroll
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Scroll 3
        trigger = { has_character_flag = dw_tower_wares_03 }
        name = dw_wizardtower302b
        wealth = -25
        add_artifact = dw_historic_trade_practices
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Scroll 4
        trigger = { has_character_flag = dw_tower_wares_04 }
        name = dw_wizardtower302b
        wealth = -50
        add_artifact = dw_demon_bestiary_scroll
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Nevermind
        name = dw_wizardtower300end
    }
}
# Shopping at the Wizard Tower: Other items (Worn, Held, Misc Artifacts)
narrative_event = {
    id = dw_wizardtower.303
    is_triggered_only = yes
	desc = dw_wizardtower303
	picture = wizard_tower_04
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Worn 1
        trigger = { has_character_flag = dw_tower_wares_01 }
        name = dw_wizardtower303a
        wealth = -25
        add_artifact = circlet_of_twilight
    }
    option = { # Worn 2
        trigger = { has_character_flag = dw_tower_wares_02 }
        name = dw_wizardtower303a
        wealth = -50
        add_artifact = necklace_of_radiance
    }
    option = { # Worn 3
        trigger = { has_character_flag = dw_tower_wares_03 }
        name = dw_wizardtower303a
        wealth = -75
        add_artifact = random_world_armor
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Worn 4
        trigger = { has_character_flag = dw_tower_wares_04 }
        name = dw_wizardtower303a
        wealth = -100
        add_artifact = armor_tier_4_warden
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Held 1
        trigger = { has_character_flag = dw_tower_wares_01 }
        name = dw_wizardtower303b
        wealth = -25
        add_artifact = silver_staff
    }
    option = { # Held 2
        trigger = { has_character_flag = dw_tower_wares_02 }
        name = dw_wizardtower303b
        wealth = -50
        add_artifact = scimitar_tier_2_new
    }
    option = { # Held 3
        trigger = { has_character_flag = dw_tower_wares_03 }
        name = dw_wizardtower303b
        wealth = -75
        add_artifact = mace_whispering
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Held 4
        trigger = { has_character_flag = dw_tower_wares_04 }
        name = dw_wizardtower303b
        wealth = -100
        add_artifact = bow_tier_4_lightning
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Misc 1
        trigger = { has_character_flag = dw_tower_wares_01 }
        name = dw_wizardtower303c
        wealth = -25
        add_artifact = skull_cup
    }
    option = { # Misc 2
        trigger = { has_character_flag = dw_tower_wares_02 }
        name = dw_wizardtower303c
        wealth = -50
        add_artifact = random_world_mythological_heart_1
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Misc 3
        trigger = { has_character_flag = dw_tower_wares_03 }
        name = dw_wizardtower303c
        wealth = -75
        add_artifact = dw_crimson_claw_banner
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Misc 4
        trigger = { has_character_flag = dw_tower_wares_04 }
        name = dw_wizardtower303c
        wealth = -100
        add_artifact = dw_dragon_horn
        ai_chance = { factor = 0 } # We do not want the ai choosing this
    }
    option = { # Nevermind
        name = dw_wizardtower300end
    }
}
# Shopping at the Wizard Tower: Other Potions
narrative_event = {
    id = dw_wizardtower.304
    is_triggered_only = yes
	desc = dw_wizardtower304
	picture = wizard_tower_06
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Love potion
        trigger = {
            NOT = { has_character_modifier = dw_love_potion }
        }
        name = dw_wizardtower304a
        wealth = -25
        narrative_event = { id = dw_wizardtower.342 }
        custom_tooltip = { text = dw_love_potion_tooltip }
    }
    option = { # Builder's Boon
        name = dw_wizardtower304b
        wealth = -50
        narrative_event = { id = dw_wizardtower.341 }
        custom_tooltip = { text = dw_builders_boon_tooltip }
    }
    option = { # Oblivion
        trigger = {
            OR = {
                has_character_flag = dw_tower_wares_02
                has_character_flag = dw_tower_wares_04
            }
            NOT = { has_character_modifier = dw_oblivion_potion }
        }
        name = dw_wizardtower304c
        wealth = -75
        narrative_event = { id = dw_wizardtower.340 }
        custom_tooltip = { text = dw_oblivion_tooltip }
    }
    option = { # Mana
        trigger = {
            OR = {
                has_character_flag = dw_tower_wares_01
                has_character_flag = dw_tower_wares_03
            }
            NOT = { has_character_modifier = dw_mana_potion }
        }
        name = dw_wizardtower304d
        wealth = -75
        narrative_event = { id = dw_wizardtower.343 }
        custom_tooltip = { text = dw_mana_potion_tooltip }
    }
    option = { # Nevermind
        name = dw_wizardtower300end
    }
    option = {
        name = dw_wizardtower300home
        narrative_event = { id = dw_wizardtower.01 }
    }
}
# Shopping at the Wizard Tower: Transmutation Potions
narrative_event = {
    id = dw_wizardtower.305
    is_triggered_only = yes
	desc = dw_wizardtower305
	picture = wizard_tower_06
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Minor Healing
        trigger = {
            has_character_flag = dw_tower_wares_01
            NOT = { has_character_modifier = dw_minor_healing_potion }
        }
        name = dw_wizardtower305a1
        wealth = -25
        narrative_event = { id = dw_wizardtower.331 }
        custom_tooltip = { text = dw_minor_healing_tooltip }
    }
    option = { # Beauty Potion
        trigger = {
            has_character_flag = dw_tower_wares_02
            NOT = { has_character_modifier = dw_beauty_potion }
        }
        name = dw_wizardtower305a2
        wealth = -50
        narrative_event = { id = dw_wizardtower.321}
        custom_tooltip = { text = dw_beauty_potion_tooltip }
    }
    option = { # Major Healing
        trigger = {
            has_character_flag = dw_tower_wares_03
            NOT = { has_character_modifier = dw_major_healing_potion }
        }
        name = dw_wizardtower305a3
        wealth = -75
        narrative_event = { id = dw_wizardtower.332 }
        custom_tooltip = { text = dw_major_healing_tooltip }
    }
    option = { # Youthfulness
        trigger = {
            has_character_flag = dw_tower_wares_04
            NOT = { has_character_modifier = dw_youthfulness_potion }
        }
        name = dw_wizardtower305a4
        wealth = -100
        narrative_event = { id = dw_wizardtower.330 }
        custom_tooltip = { text = dw_youthfulness_tooltip }
    }
    option = { # Giant growth
        trigger = {
            has_character_flag = dw_tower_wares_01
            NOT = { has_character_modifier = dw_giant_growth_potion }
        }
        name = dw_wizardtower305b1
        wealth = -50
        narrative_event = { id = dw_wizardtower.322 }
        custom_tooltip = { text = dw_giant_growth_tooltip }
    }
    option = { # Awaken Heritage
        trigger = {
            has_character_flag = dw_tower_wares_02
            NOT = { has_character_modifier = dw_awaken_heritage_potion }
        }
        name = dw_wizardtower305b2
        wealth = -50
        narrative_event = { id = dw_wizardtower.323 }
        custom_tooltip = { text = dw_awken_heritage_tooltip }
    }
    option = { # Elder Blood
        trigger = {
            has_character_flag = dw_tower_wares_03
            NOT = { has_character_modifier = dw_elder_blood_potion }
        }
        name = dw_wizardtower305b3
        wealth = -100
        narrative_event = { id = dw_wizardtower.324}
        custom_tooltip = { text = dw_elder_blood_tooltip }
    }
    option = { # Symbiote Bond Potion
        trigger = {
            has_character_flag = dw_tower_wares_04
            has_seeds_chaos_content = yes
            NOT = { has_character_modifier = dw_symbiote_potion }
        }
        name = dw_wizardtower305b4
        wealth = -100
        narrative_event = { id = dw_wizardtower.320}
        custom_tooltip = { text = dw_symbiote_union_tooltip }
    }
    option = { # Cock growth
        trigger = {
            has_character_flag = dw_tower_wares_01
            has_dw_bodytrait_content = yes
            NOT = { has_character_modifier = dw_cock_growth_potion }
        }
        name = dw_wizardtower305c1
        wealth = -25
        narrative_event = { id = dw_wizardtower.313 }
        custom_tooltip = { text = dw_cock_growth_tooltip }
    }
    option = { # Breast Expansion
        trigger = {
            has_character_flag = dw_tower_wares_02
            has_dw_bodytrait_content = yes
            NOT = { has_character_modifier = dw_breast_expansion_potion }
        }
        name = dw_wizardtower305c2
        wealth = -50
        narrative_event = { id = dw_wizardtower.312 }
        custom_tooltip = { text = dw_breast_expansion_tooltip }
    }
    option = { # Futa Form
        trigger = {
            has_character_flag = dw_tower_wares_03
            has_dw_bodytrait_content = yes
            NOT = { has_character_modifier = dw_futa_potion }
        }
        name = dw_wizardtower305c3
        wealth = -75
        narrative_event = { id = dw_wizardtower.310 }
        custom_tooltip = { text = dw_futa_form_tooltip }
    }
    option = { # Gender swap
        trigger = {
            has_character_flag = dw_tower_wares_04
            NOT = { has_character_modifier = dw_gender_swap_potion }
        }
        name = dw_wizardtower305c4
        wealth = -100
        narrative_event = { id = dw_wizardtower.311 }
        custom_tooltip = { text = dw_gender_swap_tooltip }
    }
    option = { # Nevermind
        name = dw_wizardtower300end
    }
    option = {
        name = dw_wizardtower300home
        narrative_event = { id = dw_wizardtower.01 }
    }
}
# Shopping at the Wizard Tower: Hermetic Ingredients
narrative_event = {
    id = dw_wizardtower.306
    is_triggered_only = yes
	desc = dw_wizardtower306
	picture = wizard_tower_05
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Ingredient Herbs
        trigger = { has_character_flag = dw_tower_wares_01 }
        name = dw_wizardtower306a
        wealth = -10
        add_artifact = ingredient_herb1
        add_artifact = ingredient_herb2
    }
    option = { # Ingredient Herbs
        trigger = { has_character_flag = dw_tower_wares_02 }
        name = dw_wizardtower306a
        wealth = -10
        add_artifact = ingredient_herb3
        add_artifact = ingredient_herb4
    }
    option = { # Ingredient Herbs
        trigger = { has_character_flag = dw_tower_wares_03 }
        name = dw_wizardtower306a
        wealth = -10
        add_artifact = ingredient_herb5
        add_artifact = ingredient_herb6
    }
    option = { # Ingredient Herbs
        trigger = { has_character_flag = dw_tower_wares_04 }
        name = dw_wizardtower306a
        wealth = -15
        add_artifact = ingredient_herb7
        add_artifact = ingredient_herb8
        add_artifact = ingredient_herb9
    }
    option = { # Ingredient Animal
        trigger = { has_character_flag = dw_tower_wares_01 }
        name = dw_wizardtower306b
        wealth = -10
        add_artifact = ingredient_animal1
        add_artifact = ingredient_animal2
    }
    option = { # Ingredient Animal
        trigger = { has_character_flag = dw_tower_wares_02 }
        name = dw_wizardtower306b
        wealth = -10
        add_artifact = ingredient_animal3
        add_artifact = ingredient_animal4
    }
    option = { # Ingredient Animal
        trigger = { has_character_flag = dw_tower_wares_03 }
        name = dw_wizardtower306b
        wealth = -10
        add_artifact = ingredient_animal5
        add_artifact = ingredient_animal6
    }
    option = { # Ingredient Animal
        trigger = { has_character_flag = dw_tower_wares_04 }
        name = dw_wizardtower306b
        wealth = -15
        add_artifact = ingredient_animal7
        add_artifact = ingredient_animal8
        add_artifact = ingredient_animal9
    }
    option = { # Ingredient Metal
        trigger = { has_character_flag = dw_tower_wares_01 }
        name = dw_wizardtower306c
        wealth = -10
        add_artifact = ingredient_metal_exotic1
        add_artifact = ingredient_metal_exotic2
    }
    option = { # Ingredient Metal
        trigger = { has_character_flag = dw_tower_wares_02 }
        name = dw_wizardtower306c
        wealth = -10
        add_artifact = ingredient_metal_exotic3
        add_artifact = ingredient_metal_exotic4
    }
    option = { # Ingredient Metal
        trigger = { has_character_flag = dw_tower_wares_03 }
        name = dw_wizardtower306c
        wealth = -10
        add_artifact = ingredient_metal_exotic5
        add_artifact = ingredient_metal_exotic6
    }
    option = { # Ingredient Metal
        trigger = { has_character_flag = dw_tower_wares_04 }
        name = dw_wizardtower306c
        wealth = -15
        add_artifact = ingredient_metal_exotic7
        add_artifact = ingredient_metal_exotic8
        add_artifact = ingredient_metal_exotic9
    }
    option = { # Buy All
        trigger = {
            wealth = 30
            has_character_flag = dw_tower_wares_04
        }
        name = dw_wizardtower306d
        wealth = -30
        add_artifact = ingredient_herb1
        add_artifact = ingredient_herb2
        add_artifact = ingredient_animal1
        add_artifact = ingredient_animal2
        add_artifact = ingredient_metal_exotic1
        add_artifact = ingredient_metal_exotic2
    }
    option = { # Buy All
        trigger = {
            wealth = 30
            has_character_flag = dw_tower_wares_04
        }
        name = dw_wizardtower306d
        wealth = -30
        add_artifact = ingredient_herb3
        add_artifact = ingredient_herb4
        add_artifact = ingredient_animal3
        add_artifact = ingredient_animal4
        add_artifact = ingredient_metal_exotic3
        add_artifact = ingredient_metal_exotic4
    }
    option = { # Buy All
        trigger = {
            wealth = 30
            has_character_flag = dw_tower_wares_04
        }
        name = dw_wizardtower306d
        wealth = -30
        add_artifact = ingredient_herb5
        add_artifact = ingredient_herb6
        add_artifact = ingredient_animal5
        add_artifact = ingredient_animal6
        add_artifact = ingredient_metal_exotic5
        add_artifact = ingredient_metal_exotic6
    }
    option = { # Buy All
        trigger = {
            wealth = 45
            has_character_flag = dw_tower_wares_04
        }
        name = dw_wizardtower306d
        wealth = -45
        add_artifact = ingredient_herb7
        add_artifact = ingredient_herb8
        add_artifact = ingredient_herb9
        add_artifact = ingredient_animal7
        add_artifact = ingredient_animal8
        add_artifact = ingredient_animal9
        add_artifact = ingredient_metal_exotic7
        add_artifact = ingredient_metal_exotic8
        add_artifact = ingredient_metal_exotic9
    }
    option = { # Nevermind
        name = dw_wizardtower300end
    }
}
# Shopping at the Wizard Tower: Futa Form potion
narrative_event = {
    id = dw_wizardtower.310
    is_triggered_only = yes
	desc = dw_wizardtower310
	picture = potion_futa_juice
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        trigger = {
            is_female = yes
            NOT = { trait = futa }
        }
        name = dw_wizardtower310a
        add_trait = futa
    }
    option = { # Hold onto it
        name = dw_wizardtower310b
        add_character_modifier = { modifier = dw_futa_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Gender Swap potion
narrative_event = {
    id = dw_wizardtower.311
    is_triggered_only = yes
	desc = dw_wizardtower311
	picture = potion_gender_swap
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower310a
        dw_gender_swap = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower310b
        add_character_modifier = { modifier = dw_gender_swap_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Breast Expansion potion
narrative_event = {
    id = dw_wizardtower.312
    is_triggered_only = yes
	desc = dw_wizardtower312
	picture = potion_breast_expansion
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        trigger = {
            is_female = yes
            NOT = { trait = dw_gigantic_tits }
        }
        name = dw_wizardtower310a
        dw_breast_growth = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower310b
        add_character_modifier = { modifier = dw_breast_expansion_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Cock Growth potion
narrative_event = {
    id = dw_wizardtower.313
    is_triggered_only = yes
	desc = dw_wizardtower313
	picture = potion_cock_growth
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        trigger = {
            OR = {
                is_female = no
                trait = futa
            }
            NOT = { trait = dw_gigantic_dick }
        }
        name = dw_wizardtower310a
        dw_cock_growth = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower310b
        add_character_modifier = { modifier = dw_cock_growth_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Symbiote Union potion
narrative_event = {
    id = dw_wizardtower.320
    is_triggered_only = yes
	desc = dw_wizardtower320
	picture = potion_symbiote_bond
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        trigger = { NOT = { trait = tentacle } }
        name = dw_wizardtower320a
        add_trait = tentacle
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_symbiote_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Beauty potion
narrative_event = {
    id = dw_wizardtower.321
    is_triggered_only = yes
	desc = dw_wizardtower321
	picture = potion_beauty
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower320a
        improve_looks = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_beauty_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Giant Growth potion
narrative_event = {
    id = dw_wizardtower.322
    is_triggered_only = yes
	desc = dw_wizardtower322
	picture = potion_giant_growth
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower320a
        apply_giant_growth = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_giant_growth_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Awaken Heritage potion
narrative_event = {
    id = dw_wizardtower.323
    is_triggered_only = yes
	desc = dw_wizardtower323
	picture = potion_awaken_heritage
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower320a
        apply_heritage_awakening = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_awaken_heritage_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Awaken Heritage potion
narrative_event = {
    id = dw_wizardtower.324
    is_triggered_only = yes
	desc = dw_wizardtower324
	picture = potion_elder_blood
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        trigger = {
            NOT = { trait = vampire }
            NOT = { trait = immortal }
        }
        name = dw_wizardtower320a
        consume_elder_blood = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_elder_blood_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Youthfulness potion
narrative_event = {
    id = dw_wizardtower.330
    is_triggered_only = yes
	desc = dw_wizardtower330
	picture = potion_youthfulness
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        trigger = {
            practical_age = 26 # Not looking to toss folks back into childhood
        }
        name = dw_wizardtower320a
        add_age = -10
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_youthfulness_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Minor Healing potion
narrative_event = {
    id = dw_wizardtower.331
    is_triggered_only = yes
	desc = dw_wizardtower331
	picture = potion_minor_healing
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower320a
        do_minor_healing = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_minor_healing_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Major Healing potion
narrative_event = {
    id = dw_wizardtower.332
    is_triggered_only = yes
	desc = dw_wizardtower332
	picture = potion_major_healing
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower320a
        do_major_healing = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_major_healing_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Oblivion potion
narrative_event = {
    id = dw_wizardtower.340
    is_triggered_only = yes
	desc = dw_wizardtower340
	picture = potion_oblivion
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower320a
        experience_oblivion = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_oblivion_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Builders Boon potion
narrative_event = {
    id = dw_wizardtower.341
    is_triggered_only = yes
	desc = dw_wizardtower341
	picture = potion_builders_boon
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it, one of the few potions that do not allow it to be gifted
        name = dw_wizardtower320a
        add_character_modifier = { modifier = dw_builders_boon months = 12 }
    }
}
# Shopping at the Wizard Tower: Love potion
narrative_event = {
    id = dw_wizardtower.342
    is_triggered_only = yes
	desc = dw_wizardtower342
	picture = potion_love
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower320a
        add_character_modifier = { modifier = dw_aphrodite_allure months = 12 }
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_love_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Mana potion
narrative_event = {
    id = dw_wizardtower.343
    is_triggered_only = yes
	desc = dw_wizardtower343
	picture = potion_mana
	window = "BiggerEventWindow"
	title = wizard_tower_shopping_title
    option = { # Use it
        name = dw_wizardtower320a
        clear_mana_cooldowns = yes
    }
    option = { # Hold onto it
        name = dw_wizardtower320b
        add_character_modifier = { modifier = dw_mana_potion duration = -1 }
    }
}
# Shopping at the Wizard Tower: Potion Denied
narrative_event = {
    id = dw_wizardtower.399
    is_triggered_only = yes
	desc = dw_wizardtower399
	picture = potion_denied
	window = "BiggerEventWindow"
	title = denied_title
    option = { # Denied
        name = dw_wizardtower399a
    }
}

### .1000 range - Spells

# Quick Heal
narrative_event = {
    id = dw_wizardtower.1010
    is_triggered_only = yes
	desc = dw_wizardtower1010
	picture = wizard_tower_13
	window = "BiggerEventWindow"
	title = dw_quick_heal_title
    option = { # I've been healed
        name = dw_wizardtower1010a
        remove_trait = wounded
        opinion = { modifier = dw_healed_me who = FROMFROM }
    }
}
# Midas Touch
narrative_event = {
    id = dw_wizardtower.1020
    is_triggered_only = yes
	desc = dw_wizardtower1020
	picture = wizard_tower_14
	window = "BiggerEventWindow"
	title = dw_midas_touch_title
    option = { # Normal Casting
        name = dw_wizardtower1020a
        wealth = 100
    }
    option = { # Elevated Casting
        name = dw_wizardtower1020b
        wealth = 300
        health = -1
    }
    option = { # Extreme Casting
        name = dw_wizardtower1020c
        wealth = 500
        health = -2
    }
}
# Lightning Bolt hits
character_event = {
    id = dw_wizardtower.1030
    is_triggered_only = yes
    hide_window = yes
    immediate = {
        if = {
            limit = { ai = no } # Is it the player?
            random_list = {
                80 = { narrative_event = { id = dw_wizardtower.1031 } } # Hit and survived
                20 = { narrative_event = { id = dw_wizardtower.1033 } } # Hit and dead
            }
        }
        else = { # It's the ai, lower chances of surviving
            random_list = {
                20 = { narrative_event = { id = dw_wizardtower.1031 } } # Hit and survived
                80 = { narrative_event = { id = dw_wizardtower.1033 } } # Hit and dead
            }
        }
    }
}
# Lightning Bolt hit and survived - target
narrative_event = {
    id = dw_wizardtower.1031
    is_triggered_only = yes
	desc = dw_wizardtower1031
	picture = wizard_tower_32
	window = "BiggerEventWindow"
	title = dw_lighting_strike_title
    option = { # Ouch
        name = dw_wizardtower1031a
        add_trait = wounded
        add_trait = chest_pain
        hidden_tooltip = {
            event_target:dw_spell_caster = { narrative_event = { id = dw_wizardtower.1032 }}
        }
    }
}
# Lightning Bolt hit and survived - caster
narrative_event = {
    id = dw_wizardtower.1032
    is_triggered_only = yes
	desc = dw_wizardtower1032
	picture = wizard_tower_32
	window = "BiggerEventWindow"
	title = dw_lighting_strike_title
    option = { # So close
        name = dw_wizardtower1032a
    }
}
# Lightning Bolt hit and died - target
narrative_event = {
    id = dw_wizardtower.1033
    is_triggered_only = yes
	desc = dw_wizardtower1033
	picture = wizard_tower_32
	window = "BiggerEventWindow"
	title = dw_lighting_strike_title
    option = { # Why me?
        name = dw_wizardtower1033a
        death = { death_reason = death_murder_unknown_lightning killer = event_target:dw_spell_caster }
        hidden_tooltip = {
            event_target:dw_spell_caster = { narrative_event = { id = dw_wizardtower.1034 }}
        }
    }
}
# Lightning Bolt hit and died - caster
narrative_event = {
    id = dw_wizardtower.1034
    is_triggered_only = yes
	desc = dw_wizardtower1034
	picture = wizard_tower_32
	window = "BiggerEventWindow"
	title = dw_lighting_strike_title
    option = { # Yes!
        name = dw_wizardtower1034a
    }
}
# Lightning Bolt misses - target
narrative_event = {
    id = dw_wizardtower.1035
    is_triggered_only = yes
	desc = dw_wizardtower1035
	picture = wizard_tower_33
	window = "BiggerEventWindow"
	title = dw_lighting_strike_title
    option = { # That was close
        name = dw_wizardtower1035a
        hidden_tooltip = {
            event_target:dw_spell_caster = { narrative_event = { id = dw_wizardtower.1036 }}
        }
    }
}
# Lightning Bolt misses - caster
narrative_event = {
    id = dw_wizardtower.1036
    is_triggered_only = yes
	desc = dw_wizardtower1036
	picture = wizard_tower_33
	window = "BiggerEventWindow"
	title = dw_lighting_strike_title
    option = { # Damn it
        name = dw_wizardtower1036a
    }
}
# Disintegrate hit - caster
narrative_event = {
    id = dw_wizardtower.1040
    is_triggered_only = yes
	desc = dw_wizardtower1040
	picture = wizard_tower_34
	window = "BiggerEventWindow"
	title = dw_dinstegrate_title
    option = { # Yes!
        name = dw_wizardtower1040a
    }
}
# Summon Familiar
narrative_event = {
    id = dw_wizardtower.1050
    is_triggered_only = yes
	desc = dw_wizardtower1050
	picture = wizard_tower_38
	window = "BiggerEventWindow"
	title = dw_summon_familiar_title
    immediate = {
        remove_character_modifier = dw_familiar_cat
        remove_character_modifier = dw_familiar_dog
        remove_character_modifier = dw_familiar_owl
        remove_character_modifier = dw_familiar_parrot
        remove_character_modifier = dw_familiar_wolf
        remove_character_modifier = dw_familiar_raven
        remove_character_modifier = dw_familiar_rat
        remove_character_modifier = dw_familiar_otter
        remove_character_modifier = dw_familiar_hedgehog
    }
    option = { # Come to me my pet.
        name = dw_wizardtower1050a
        hidden_tooltip = {
            random_list = {
                10 = { add_character_modifier = { modifier = dw_familiar_cat duration = -1 } }
                10 = { add_character_modifier = { modifier = dw_familiar_dog duration = -1 } }
                10 = { add_character_modifier = { modifier = dw_familiar_owl duration = -1 } }
                10 = { add_character_modifier = { modifier = dw_familiar_parrot duration = -1 } }
                10 = { add_character_modifier = { modifier = dw_familiar_wolf duration = -1 } }
                10 = { add_character_modifier = { modifier = dw_familiar_raven duration = -1 } }
                10 = { add_character_modifier = { modifier = dw_familiar_rat duration = -1 } }
                10 = { add_character_modifier = { modifier = dw_familiar_otter duration = -1 } }
                10 = { add_character_modifier = { modifier = dw_familiar_hedgehog duration = -1 } }
            }
        }
    }
}
# Summon Imp Familiar
narrative_event = {
    id = dw_wizardtower.1060
    is_triggered_only = yes
	desc = dw_wizardtower1060
	picture = wizard_tower_36
	window = "BiggerEventWindow"
	title = dw_summon_familiar_title
    option = { # It is done.
        name = dw_wizardtower1060a
        hidden_tooltip = {
            add_character_modifier = { modifier = dw_familiar_imp duration = -1 }
        }
    }
}
# Cast Commune
narrative_event = {
    id = dw_wizardtower.1070
    is_triggered_only = yes
	desc = dw_wizardtower1070
	picture = wizard_tower_37
	window = "BiggerEventWindow"
	title = dw_commune_title
    option = { # I've obtain insight
        name = dw_wizardtower1070a
        hidden_tooltip = {
            dw_determine_commune_results = yes
        }
    }
}
# Cast Minor Heal
narrative_event = {
    id = dw_wizardtower.1080
    is_triggered_only = yes
	desc = dw_wizardtower1080
	picture = wizard_tower_39
	window = "BiggerEventWindow"
	title = dw_healing_title
    option = { # I've been healed
        name = dw_wizardtower1080a
        do_minor_healing_spell = yes
        opinion = { modifier = dw_healed_me who = event_target:dw_spell_caster }
    }
}
# Cast Major Heal
narrative_event = {
    id = dw_wizardtower.1090
    is_triggered_only = yes
	desc = dw_wizardtower1090
	picture = wizard_tower_40
	window = "BiggerEventWindow"
	title = dw_healing_title
    option = { # I've been healed
        name = dw_wizardtower1090a
        do_major_healing_spell = yes
        opinion = { modifier = dw_healed_me who = event_target:dw_spell_caster }
    }
}
# Cast Raise  Horde
narrative_event = {
    id = dw_wizardtower.1100
    is_triggered_only = yes
	desc = dw_wizardtower1100
	picture = wizard_tower_41
	window = "BiggerEventWindow"
	title = dw_undead_horde_title
    option = { # Normal Casting
        name = dw_wizardtower1100a
        location = {
            ROOT = {
                spawn_unit = { # The dead rise for battle
                    province = PREV
                    owner = ROOT
                    troops = {
                        light_infantry = { 100 100 }
                        heavy_infantry = { 50 50 }
                        pikemen = { 25 25 }
                    }
                    maintenance_multiplier = 0 # The dead need no maintenance
        			reinforces = no
                }
            }
        }
    }
    option = { # Elevated Casting
        name = dw_wizardtower1100b
        location = {
            ROOT = {
                spawn_unit = { # The dead rise for battle
                    province = PREV
                    owner = ROOT
                    troops = {
                        light_infantry = { 300 300 }
                        heavy_infantry = { 100 100 }
                        pikemen = { 50 50 }
                    }
                    maintenance_multiplier = 0 # The dead need no maintenance
        			reinforces = no
                }
            }
        }
        location = {
            add_province_modifier = {
                name = dw_aura_of_death
                years = 1
            }
        }
    }
    option = { # Extreme Casting
        name = dw_wizardtower1100c
        location = {
            ROOT = {
                spawn_unit = { # The dead rise for battle
                    province = PREV
                    owner = ROOT
                    troops = {
                        light_infantry = { 500 500 }
                        heavy_infantry = { 150 150 }
                        pikemen = { 75 75 }
                    }
                    maintenance_multiplier = 0 # The dead need no maintenance
        			reinforces = no
                }
            }
        }
        location = {
            add_province_modifier = {
                name = dw_strong_aura_of_death
                years = 1
            }
        }
    }
}

# .9999 dw_tower_visit_recovery flag removal
character_event = {
	id = dw_wizardtower.9999
	hide_window = yes # Nothing to see here
	is_triggered_only = yes # Various decisions call this, usually after 30 days
	immediate = {
		clr_character_flag = dw_tower_visit_recovery
        clr_character_flag = dw_tower_wares_01
        clr_character_flag = dw_tower_wares_02
        clr_character_flag = dw_tower_wares_03
        clr_character_flag = dw_tower_wares_04
	}
}
# .5100 Consulting with Sorcey
narrative_event = {
	id = dw_wizardtower.5100
	desc = "dw_wizardtower5100"
	picture = wizard_sorcey
	title = dw_mage_consult_sorcey
	is_triggered_only = yes # Triggered by targeted decision
	option = { # Restorative food
		name = dw_wizardtower5100A
		narrative_event = { id = dw_wizardtower.5101 }
	}
	option = { # Frog casting
		trigger = {
			piety = 1 # This can take them into the negative, but they have to at least be in the positive in order to pull in energy
		}
		name = dw_wizardtower5100B
		narrative_event = { id = dw_wizardtower.5102 }
	}
	option = { # Never mind
		name = dw_wizardtower5100D
	}
}
# .5101 Consulting with Sorcey - Food options
narrative_event = {
	id = dw_wizardtower.5101
	desc = "dw_wizardtower5101"
	picture = wizard_sorcey_food
	title = dw_mage_consult_sorcey
	is_triggered_only = yes # Triggered by .5100
	option = { # Minor Wound Healing, always available
		name = dw_wizardtower5101A
		piety = -5
		if = {
			limit = {
				trait = wounded
			}
			remove_trait = wounded
		}
		if = {
			limit = {
				trait = scarred
			}
			remove_trait = scarred
		}
	}
	option = { # Food of fortitude
		trigger = {
			piety = 1 # This can take them into the negative, but they have to at least be in the positive in order to pull in energy
		}
		name = dw_wizardtower5101B
		health = +0.1
		piety = -100
	}
	option = { # Honeyed words - increases diplomacy
		trigger = {
			piety = 1 # This can take them into the negative, but they have to at least be in the positive in order to pull in energy
		}
		name = dw_wizardtower5101C
		change_diplomacy = 1
		piety = -250
	}
	option = { # Never mind
		name = dw_wizardtower5101D
	}
}
# .5102 Consulting with Sorcey - Frog Casting
narrative_event = {
	id = dw_wizardtower.5102
	desc = "dw_wizardtower5102"
	picture = wizard_sorcey_frog
	title = dw_mage_consult_sorcey
	is_triggered_only = yes # Triggered by .5100
	option = { # Let's turn someone into a frog
		name = dw_wizardtower5102A
		piety = -1000
		add_character_modifier = {
			name = dw_spell_frog_target
			duration = -1 # Indefinite until cast
		}
	}
	option = { # Never mind
		name = dw_wizardtower5102B
	}
}
# .5250 Hermione event arc
character_event = {
	id = dw_wizardtower.5250
	is_triggered_only = yes # by .5011
	hide_window = yes # nothing to see here
	trigger = {
		# We want to ensure that Hermione is still alive and in the player's court
		event_target:dw_target_hermione = {
			liege = { character = ROOT }
			is_alive = yes
		}
	}
	immediate = {
		# Stuff!
		# Circle event (sets slut or saint flag)
		# random chance for slut or saint events
		random_list = {
			100 = {
				modifier = { # Not an option if either slut or saint flag exists
					factor = 0
					event_target:dw_target_hermione = {
						OR = {
							has_character_flag = dw_hermione_slut
							has_character_flag = dw_hermione_saint
						}
					}
				}
				narrative_event = { id = dw_wizardtower.5251 }
			}
			10 = { # No special event, we just push this event down the road another six months where we check again
				character_event = { id = dw_wizardtower.5250 days = 180 }
			}
			10 = { # Slut Hermione and the Love Potion
				modifier = { # We don't run this if she's not a slut
					factor = 0
					event_target:dw_target_hermione = {
						NOT = { has_character_flag = dw_hermione_slut }
					}
				}
				narrative_event = { id = dw_wizardtower.5260 }
			}
		}
	}
}
# .5251 Hermione Event Arc Start - the failed circle magic
narrative_event = {
	id = dw_wizardtower.5251
	picture = wizard_hermione_event1
	desc = dw_wizardtower5251
	title = dw_hermione_event_start
	is_triggered_only = yes # by .5250
	option = { # Help Hermione
		name = dw_wizardtower5251A
		event_target:dw_target_hermione = {
			set_character_flag = dw_hermione_saint
		}
		narrative_event = { id = dw_wizardtower.5252 days = 1 }
	}
	option = { # Don't Help Hermione
		name = dw_wizardtower5251B
		event_target:dw_target_hermione = {
			set_character_flag = dw_hermione_slut
		}
		narrative_event = { id = dw_wizardtower.5253 days = 1 }
	}
}
# .5252 Hermione Event Arc Start - Saved Hermione
narrative_event = {
	id = dw_wizardtower.5252
	picture = wizard_hermione_event2
	desc = {
		trigger = { # Hermione is not presently the player's lover
			event_target:dw_target_hermione = {
				NOT = {
					is_lover = ROOT
				}
			}
		}
		text = dw_wizardtower5252.0
	}
	desc = {
		trigger = { # Hermione is the player's lover
			event_target:dw_target_hermione = {
				is_lover = ROOT
			}
		}
		text = dw_wizardtower5252.1
	}
	title = dw_hermione_event_start
	is_triggered_only = yes # by .5251
	option = { # Accept Hermione's offering of love
		trigger = {
			event_target:dw_target_hermione = {
				NOT = {
					is_lover = ROOT
				}
			}
		}
		name = dw_wizardtower5252A
		event_target:dw_target_hermione = {
			add_lover = ROOT
		}
		add_lover = event_target:dw_target_hermione
		hidden_tooltip = { # We cycle back around for another random event
			character_event = { id = dw_wizardtower.5250 days = 360 }
		}
	}
	option = { # Reject Hermione's offering of love
		trigger = {
			event_target:dw_target_hermione = {
				NOT = {
					is_lover = ROOT
				}
			}
		}
		name = dw_wizardtower5252B
		hidden_tooltip = { # We cycle back around for another random event
			character_event = { id = dw_wizardtower.5250 days = 360 }
		}
	}
	option = { # Glad that Hermione, my love, is alright
		trigger = { # Hermione is the player's lover
			event_target:dw_target_hermione = {
				is_lover = ROOT
			}
		}
		name = dw_wizardtower5252C
		hidden_tooltip = { # We cycle back around for another random event
			character_event = { id = dw_wizardtower.5250 days = 360 }
		}
	}
}
# .5253 Hermione Event Arc Start - Hermione Lost
narrative_event = {
	id = dw_wizardtower.5253
	picture = wizard_hermione_masturbate1
	desc = {
		trigger = { # Hermione is not presently the player's lover
			event_target:dw_target_hermione = {
				NOT = {
					is_lover = ROOT
				}
			}
		}
		text = dw_wizardtower5253.0
	}
	desc = {
		trigger = { # Hermione is the player's lover
			event_target:dw_target_hermione = {
				is_lover = ROOT
			}
		}
		text = dw_wizardtower5253.1
	}
	title = dw_hermione_event_start
	is_triggered_only = yes # by .5251
	option = { # Poor thing is broken
		trigger = { # Hermione is not presently the player's lover
			event_target:dw_target_hermione = {
				NOT = {
					is_lover = ROOT
				}
			}
		}
		name = dw_wizardtower5253A
		hidden_tooltip = { # We cycle back around for another random event
			narrative_event = { id = dw_wizardtower.5254 days = 7 }
		}
		event_target:dw_target_hermione = {
			add_trait = lustful
		}
	}
	option = { # I've broken my love, yet gained a slut
		trigger = { # Hermione is the player's lover
			event_target:dw_target_hermione = {
				is_lover = ROOT
			}
		}
		name = dw_wizardtower5253B
		hidden_tooltip = { # We cycle back around for another random event
			narrative_event = { id = dw_wizardtower.5254 days = 7 }
		}
		event_target:dw_target_hermione = {
			add_trait = lustful
		}
	}
}
# .5254 Hermione Event Arc Start - Hermione Lost 2
narrative_event = {
	id = dw_wizardtower.5254
	picture = wizard_hermione_event3
	desc = {
		trigger = { # Hermione is not presently the player's lover
			event_target:dw_target_hermione = {
				NOT = {
					is_lover = ROOT
				}
			}
		}
		text = dw_wizardtower5254.0
	}
	desc = {
		trigger = { # Hermione is the player's lover
			event_target:dw_target_hermione = {
				is_lover = ROOT
			}
		}
		text = dw_wizardtower5254.1
	}
	title = dw_hermione_event_start
	is_triggered_only = yes # by .5251
	option = { # Scratch that itch
		name = dw_wizardtower5254A
		event_target:dw_target_hermione = {
			add_trait = lunatic
		}
		hidden_tooltip = { # We cycle back around for another random event
			character_event = { id = dw_wizardtower.5250 days = 360 }
			if = {
				limit = { # If it's a guy
					is_female = no
				}
				narrative_event = { id = dw_wizardtower.5255 } # Anal pounding
			}
			if = {
				limit = { # Is a futa
					trait = futa
				}
				narrative_event = { id = dw_wizardtower.5256 } # Futa pounding
			}
			if = {
				limit = { # Is a non-futa female
					is_female = yes
					NOT = { trait = futa }
				}
				narrative_event = { id = dw_wizardtower.5257 } # Lesbian munch
			}
		}
	}
	option = { # Not tonight
		name = dw_wizardtower5254B
		hidden_tooltip = { # We cycle back around for another random event
			character_event = { id = dw_wizardtower.5250 days = 360 }
		}
		event_target:dw_target_hermione = {
			add_trait = lunatic
		}
	}
}
# .5255 Hermione Event Arc Start - Hermione Anal pounding
narrative_event = {
	id = dw_wizardtower.5255
	picture = wizard_hermione_anal1
	desc = dw_wizardtower5255
	title = dw_hermione_event_start
	is_triggered_only = yes # by .5254
	option = { # Fucking crazy bitch
		name = dw_wizardtower5255A
		event_target:dw_target_hermione = {
			add_character_modifier = { name = dw_still_wanting_more days = 30 }
		}
	}
}
# .5256 Hermione Event Arc Start - Hermione Futa fucked
narrative_event = {
	id = dw_wizardtower.5256
	picture = wizard_hermione_futa1
	desc = dw_wizardtower5256
	title = dw_hermione_event_start
	is_triggered_only = yes # by .5254
	option = { # Fucking crazy bitch
		name = dw_wizardtower5256A
		event_target:dw_target_hermione = {
			add_character_modifier = { name = dw_still_wanting_more days = 30 }
		}
	}
}
# .5257 Hermione Event Arc Start - Hermione Lesbian munch
narrative_event = {
	id = dw_wizardtower.5257
	picture = wizard_hermione_lesbian1
	desc = dw_wizardtower5257
	title = dw_hermione_event_start
	is_triggered_only = yes # by .5254
	option = { # Fucking crazy bitch
		name = dw_wizardtower5257A
	}
}
# .5260 Hermione Love Potion Event
narrative_event = {
	id = dw_wizardtower.5260
	picture = wizard_hermione_lesbian2
	desc = dw_wizardtower5260
	title = dw_hermione_love_potion_title
	is_triggered_only = yes # by .5250
	option = { # Thank you Hermione for the potion
		name = dw_wizardtower5260A
		hidden_tooltip = { # We cycle back around for another random event
			character_event = { id = dw_wizardtower.5250 days = 360 }
		}
		set_character_flag = dw_has_hermione_love_potion
	}
	option = { # You can keep and use it.
		name = dw_wizardtower5260B
		hidden_tooltip = { # We cycle back around for another random event
			character_event = { id = dw_wizardtower.5250 days = 360 }
			# Create a random female character with Hermione as its lover
			random_list = {
				75 = { # Random female
					character_event = { id = dw_wizardtower.5265 }
				}
				50 = { # Ginny joins
					modifier = {
						factor = 0
						has_global_flag = dw_npc_ginny_created
					}
					narrative_event = { id = dw_wizardtower.5266 }
				}
				50 = { # Luna joins
					modifier = {
						factor = 0
						has_global_flag = dw_npc_luna_created
					}
					narrative_event = { id = dw_wizardtower.5267 }
				}
			}
		}
		custom_tooltip = { text = dw_add_random_npc_notice }
	}
}
# .5261 Hermione Love Potion
narrative_event = {
	id = dw_wizardtower.5261
	picture = spell_love_potion
	desc = {
		trigger = { # Total success
			attribute_diff = {
				character = event_target:dw_love_potion_target
				attribute = intrigue
				value = 10
			}
		}
		text = dw_wizardtower5261.0
	}
	desc = {
		trigger = { # Favorable
			attribute_diff = {
				character = event_target:dw_love_potion_target
				attribute = intrigue
				value = 5
			}
			NOT = {
				attribute_diff = {
					character = event_target:dw_love_potion_target
					attribute = intrigue
					value = 10
				}
			}
		}
		text = dw_wizardtower5261.1
	}
	desc = {
		trigger = { # Difficult
			NOT = {
				attribute_diff = {
					character = event_target:dw_love_potion_target
					attribute = intrigue
					value = 5
				}
			}
		}
		text = dw_wizardtower5261.2
	}
	title = dw_hermione_event_start
	is_triggered_only = yes # by targetted decision
	immediate = {
		FROM = {
			save_event_target_as = dw_love_potion_target
		}
	}
	option = { # Total Success
		trigger = { # Total success
			attribute_diff = {
				character = event_target:dw_love_potion_target
				attribute = intrigue
				value = 10
			}
		}
		name = dw_wizardtower5261A
		event_target:dw_love_potion_target = {
			add_lover = ROOT
		}
		add_lover = event_target:dw_love_potion_target
		hidden_tooltip = {
			event_target:dw_love_potion_target = {
				remove_trait = chaste
				remove_trait = celibate
				add_trait = lustful
			}
		}
	}
	option = { # Favorable
		trigger = { # Favorable
			attribute_diff = {
				character = event_target:dw_love_potion_target
				attribute = intrigue
				value = 5
			}
			NOT = {
				attribute_diff = {
					character = event_target:dw_love_potion_target
					attribute = intrigue
					value = 10
				}
			}
		}
		name = dw_wizardtower5261B
		random_list = {
			75 = {
				event_target:dw_love_potion_target = {
					add_lover = ROOT
				}
				add_lover = event_target:dw_love_potion_target
				hidden_tooltip = {
					event_target:dw_love_potion_target = {
						remove_trait = chaste
						remove_trait = celibate
						add_trait = lustful
					}
				}
			}
			25 = {
				event_target:dw_love_potion_target = {
					opinion = {
						modifier = dw_rejected_forced_love
						who = ROOT
					}
				}
			}
		}
	}
	option = { # Difficult
		trigger = { # Difficult
			NOT = {
				attribute_diff = {
					character = event_target:dw_love_potion_target
					attribute = intrigue
					value = 5
				}
			}
		}
		name = dw_wizardtower5261C
		random_list = {
			50 = {
				event_target:dw_love_potion_target = {
					add_lover = ROOT
				}
				add_lover = event_target:dw_love_potion_target
				hidden_tooltip = {
					event_target:dw_love_potion_target = {
						remove_trait = chaste
						remove_trait = celibate
						add_trait = lustful
					}
				}
			}
			50 = {
				event_target:dw_love_potion_target = {
					opinion = {
						modifier = dw_rejected_forced_love
						who = ROOT
					}
				}
			}
		}
	}
}
# .5265 Hermione Love Potion - Random female joins court as Hermione's lover
character_event = {
	id = dw_wizardtower.5265
	hide_window = yes # nothing to see here
	is_triggered_only = yes # by .5260
	immediate = {
		create_character = {
			random_traits = yes
			dynasty = none
			female = yes
			age = 18
			religion = ROOT
			culture = ROOT
			trait = lustful
			attributes = {
				intrigue = 4
			}
		}
		new_character = {
			if = {
				limit = { has_dw_bodytrait_content = yes }
				character_event = { id = DWBody.20 } # Will randomly assign a breast size
			}
			add_lover = event_target:dw_target_hermione
		}
	}
}
# .5266 Hermione Love Potion - Ginny joins court as Hermione's lover
narrative_event = {
	id = dw_wizardtower.5266
	desc = dw_wizardtower5266
	title = dw_ginny_joins_title
	picture = wizard_ginny
	is_triggered_only = yes # by .5260
	immediate = {
		create_character = {
			random_traits = no
			name = Ginny
			dynasty = none
			female = yes
			age = 16
			religion = ROOT
			culture = ROOT
			race = irish
			dna = aghefaecgca
			health = 5.0
			trait = fair
			trait = amateurish_plotter
			trait = kind
			trait = shy
			trait = trusting
			trait = erudite
			trait = humble
			trait = mage
			trait = lustful # From the love potion
			trait = portrait17 # Ginny's photo
			attributes = {
				diplomacy = 5
				intrigue = 3
				stewardship = 4
				martial = 3
				learning = 6
			}
		}
		new_character = {
			set_character_flag = dw_boobs_checked
			set_character_flag = dw_npc_ginny
			add_lover = event_target:dw_target_hermione
			if = {
				limit = { has_dw_bodytrait_content = yes }
				add_trait = dw_regular_tits
			}
		}
		set_global_flag = dw_npc_ginny_created
	}
	option = { # Welcome to my court
		name = dw_wizardtower5266A
	}
}
# .5267 Hermione Love Potion - Luna joins court as Hermione's lover
narrative_event = {
	id = dw_wizardtower.5267
	picture = wizard_luna
	desc = dw_wizardtower5267
	title = dw_luna_joins_title
	is_triggered_only = yes # by .5260
	immediate = {
		create_character = {
			random_traits = no
			name = Luna
			dynasty = none
			female = yes
			age = 16
			religion = ROOT
			culture = ROOT
			race = norse
			dna = aghefaecgca
			health = 6.0
			trait = quick
			trait = underhanded_rogue
			trait = patient
			trait = humble
			trait = honest
			trait = erudite
			trait = lunatic
			trait = mage
			trait = lustful # From the love potion
			trait = portrait18 # Luna's photo
			attributes = {
				diplomacy = 5
				intrigue = 3
				stewardship = 4
				martial = 3
				learning = 6
			}
		}
		new_character = {
			set_character_flag = dw_boobs_checked
			set_character_flag = dw_npc_luna
			add_lover = event_target:dw_target_hermione
			if = {
				limit = { has_dw_bodytrait_content = yes }
				add_trait = dw_small_tits
			}
		}
		set_global_flag = dw_npc_luna_created
	}
	option = { # Welcome to my court
		name = dw_wizardtower5267A
	}
}
