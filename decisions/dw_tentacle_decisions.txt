### This file contains both normal and targeted decisions related to the Tentacle-kin portion of the Dark World Reborn mod
decisions = {
	# Seeds of Chaos Campaign Style Selection
	dw_tentacle_campaign = {
		potential = {
			ai = no # Only the player should ever see this
			has_tentacle_start = yes
			has_seeds_chaos_content = yes
			has_dw_campaign_started = no
		}
		allow = {
			always = yes # It should always be displayed if it is relevant
		}
		effect = {
			set_global_flag = dw_campaign_started
			narrative_event = { id = DWTentacle.10 }
		}
		ai_will_do = {
			factor = 0 # Zero chance the ai uses this
		}
	}
}
targetted_decisions = {
	# Tentacle-kin Mind Fuck!
	dw_tentacle_mindfuck = {
		filter = all
		ai_target_filter = realm
		from_potential = {
			trait = tentacle
		}
		potential = {
			NOT = { character = FROM } # Should NOT be casting this on themselves
		}
		allow = {
			is_within_diplo_range = FROM
			FROM = { piety = 50 }
		}
		effect = {
			FROM = {
				narrative_event = { id = DWTentacle.1000 }  # The Tentacle-kin stalks the target
			}
		}
		ai_will_do = {
			factor = 0 # Right now we don't want the ai doing this - at least not until I get things ironed out
		}
	}
	# Self remove tentacle trait and tentacle pic if Seeds of Chaos turned off
	dw_purge_tentacle_trait = {
		filter = self
		ai_target_filter = self
		potential = {
			trait = tentacle
			NOT = { has_seeds_chaos_content = yes }
		}
		allow = {
			trait = tentacle
			NOT = { has_seeds_chaos_content = yes }
		}
		effect = {
			remove_trait = tentacle
			if = {
				limit = { has_custom_tentacle_pic = yes }
				remove_custom_dw_pic = yes
			}
		}
		ai_will_do = { factor = 1.0 } # 100%
	}
	dw_out_of_the_shadows_decision = {
		filter = self
		ai_target_filter = self
		ai_check_interval = 60 # No more than once every five years
		from_potential = { # is the person doing the targetting valid
			trait = tentacle
		}
		potential = { # is who we're targeting valid
			NOT = { has_character_modifier = dw_out_of_the_shadows } # this modifier assumes they've already come out
			trait = tentacle # Nothing to come out from if we're not tentacl kin
			character = FROM # should be targeting ourselves
		}
		allow = {
			NOT = { has_character_modifier = dw_enemy_of_mankind } # You're already out if you've got this
		}
		effect = {
			add_character_modifier = { modifier = dw_out_of_the_shadows duration = -1 } # Once you're out, you're out.
		}
		ai_will_do = {
			factor = 0.01 # 1% likely
			modifier = {
				factor = 25 # Should make it 25%
				OR = {
					trait = lunatic # They're crazy enough to do it
					trait = possessed # Someone else made them do it
					trait = imbecile # They're dumb enough to do it
					trait = impaler # Strong urge to use their own tentacles in some impaling
					trait = wroth # When they get angry, the tentacles have trouble staying hidden
					trait = arbitrary # They came out, because why not
					trait = cruel # How better to torment someone than with tentacles
				}
			}
			modifier = {
				factor = 0 # Should make it 0% - meaning it won't happen
				trait = craven # Too cowardly
			}
		}
	}
}
