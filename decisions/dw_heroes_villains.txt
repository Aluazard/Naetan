decisions = {
	dw_choosing_sides = { # Leaders have the option to choose a side in the stuggle between Heroes and Villains
		is_high_prio = yes # Will show an alert once decision is enabled
		ai_check_interval = 36 # We only want the ai checking this once every three years
		potential = {
			is_ruler = yes
			NOR = {
				trait = hero
				trait = villain
			}
		}
		allow = {
			NOT = { is_incapable = yes }
		}
		effect = {
			character_event = { id = dw_hvevents.10}
		}
		ai_will_do = {
			#Factors for an AI character to take the decision (1 = 100% chance)
			factor = 0.2 # 20% chance
			modifier = {
				factor = 0
					NOT = { ai_ambition = 0 } # With no ambition (Not 0 should mean that anything with negative ai_ambition would be seen as true), one won't enter the world of Heroes and Villains
			}
		}
	}
}
targeted_decisions = {
    dw_make_my_nemesis = {
		filter = all
		ai_target_filter = realm
		ai_check_interval = 24 # No more than once every other year
		from_potential = { # is the person doing the targetting valid
			OR = {
				trait = hero
				trait = villain
			}
		}
		potential = { # is who we're targeting valid
			NOT = { character = FROM } # Let's not target ourselves
			NOT = { is_foe = FROM } # If they're already a foe, then this isn't needed
		}
		allow = {
			NOT = { # We don't want the player's court ganging up on them
				ROOT = { is_liege_of = FROM }
				ROOT = { ai = no }
			}
		}
		effect = {
			FROM = { opinion = { modifier = dw_my_nemesis who = ROOT }}
			opinion = { modifier = dw_my_nemesis who = FROM }
			hidden_tooltip = {
				FROM = {
					save_event_target_as = dw_decision_target
					set_character_flag = dw_made_nemesis
					character_event = { id = dw_hvevents.9000 months = 12 } # clears the flag after 12 months
				}
			}
			# Target gets an event letting them know they've a new nemesis (so players aren't surprised)
			narrative_event = { id = dw_hvevents.2500 }
		}
		ai_will_do = {
			factor = 0.5 # 50% likely
		}
	}
    # Mind Control Attempt
	dw_mind_control_attempt = {
		filter = all
		ai_target_filter = court
		ai_check_interval = 6 # Check twice a year
		from_potential = {
			trait = mind_control
		}
		potential = {
			NOT = { character = FROM } # No trying to mind control ourselves
		}
		allow = {
			FROM = {
				trait = mind_control
				NOT = { has_character_modifier = dw_mind_control_cooldown }
			}
		}
		effect = {
			FROM = { add_character_modifier = { name = dw_mind_control_cooldown days = 30 }}
			FROM = { narrative_event = { id = dw_hvevents.8100 } }
		}
		ai_will_do = {
			factor = 0.1 # 10% likely to give it a try
		}
	}
    # Rape prisoners - Villain action
	dw_prisoner_rape = {
		only_playable = yes
		filter = court
		ai_target_filter = court
		ai_check_interval = 6
		from_potential = {
			is_playable = yes
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			trait = villain
		}
		potential = {
			prisoner = yes
			host = { character = FROM }
			is_adult = yes
		}
		allow = {
			prisoner = yes
		}
		effect = {
			hidden_tooltip = { # Potential for the rapist to get a nickname
				if = {
					limit = {
						FROM = {
							has_nickname = no
							is_adult = yes
						}
					}
					random_list = {
						5 = { FROM = { give_nickname = nick_the_cruel } }
						5 = { FROM = { give_nickname = nick_the_evil } }
						5 = { FROM = { give_nickname = nick_the_depraved } }
						5 = { FROM = { give_nickname = nick_the_rapist } }
						100 = {  } # Nothing happens
					}
				}
			}
			hidden_tooltip = { # The events related to the act
				if = { # It's the player being raped
					limit = { ai = no } # It's the player getting raped
					FROM = { save_event_target_as = dw_prison_host }
					narrative_event = { id = dw_hvevents.200 }
				}
				else = { # Or it's the ai
					save_event_target_as = dw_prisoner_target
					FROM = { narrative_event = { id = dw_hvevents.230 } }
				}
			}
		}
	}
}
