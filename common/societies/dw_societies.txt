#### Dark World Societies ####

## Wizard's College
dw_the_wizards = {
	primary_attribute = learning
	is_secret = yes
	# We're not listing the criminal or devil_worshipper tags as those are both no, which is the default setting.
	sound = hermetic_society_interface
	society_ranks_gfx = generic_ranks
	opinion_to_other_members = +5
	opinion_to_pretenders = -40			#Pretenders is the opinion you have of people perceived/discovered to be in your society.
	opinion_to_perceived_members = -40	#Perceived is the opinion you have of people perceived/discovered to be of a society you're not part of
	opinion_per_rank_above = +10
	non_interference = {
		always = yes
	}
	active = {
		# Should be always active, as we've no game rule associated with Wizards.
	}
	indestructible = yes
	
	can_join_society = {
		hidden_trigger = {
			NAND = {
				ai = yes
				is_society_rank_full = { 
					society = dw_the_wizards
					rank = 1
				}
			}
			OR = {
				is_landed = yes
				is_patrician = yes
			}
		}
		learning = 8
		NOR = {
			is_nomadic = yes
			is_tribal = yes
		}
		hidden_trigger = { mercenary = no }
		age = 16
		hidden_trigger = {
			NOT = { has_character_flag = society_join_block }
		}
		custom_tooltip = { text = dw_disapproves_of_the_wizards_tooltip }
		hidden_trigger = {
			NOT = { has_character_flag = disapproves_of_the_wizards }
		}
	}

	show_society = {
		# Always
	}
	
	potential = {
		NOR = {
			is_nomadic = yes
			is_tribal = yes
		}
		age = 16
		#If something else is added here, it could break apprenticeship. Create an event if they can get kicked out. title_hermetics_apprentice
	}
	
	society_rank = { # Typically Mundanes who long for arcane power/secrets
		level = 1
		limit = 90
		startup_limit = 9
		modifier = {
			church_opinion = -10
		}
		decisions = {
			# Nothing comes to mind at this time.
		}
	}
	
	society_rank = { # Knowledge has begun to open possibilities, standing at the edge of opening the door.
		level = 2
		limit = 60
		startup_limit = 6
		modifier = { 
			learning = 1
		}
		decisions = {
			dw_the_wizards_mage_trait_choice # Choose to become a mage or remain a mundane.
			# dw_the_wizards_write_arcane_theory_paper # Enables you to write an arcane theory paper that, if approved, gives you society power
			# hermetics_perform_scrying # Enables you to perform a scrying and gain an omen
			# brew_happiness_potion # Enables you to brew a potion
			dw_arcane_college_recruit # Approach a potential recruit to join the Arcane College
		}
	}
	
	society_rank = { # Arcane talents are awakened and a decision point on whether or not they are realized.
		level = 3
		limit = 30
		startup_limit = 3
		modifier = {
			learning = 2
		}
		decisions = {
			# hermetics_make_horoscope # Enables you to "predict" your children's future
		}
	}

	society_rank = {
		level = 4
		limit = 3
		startup_limit = 1
		modifier = { 
			learning = 3
		}
		decisions = {
			# choose_hermetic_art # Enables you to pick/change your lifestyle trait
			dw_the_wizards_write_arcane_theory # Write a tome of advanced arcane theory (artifact)
		}
	}
	
	plots = {
	}
	
	monthly_currency_gain = {
		name = currency_name_dw_the_wizards
		
		per_attribute = {
    		name = learning
    		value = 0.5
    	}
		has_trait = {
			value = 2
			trait = diligent
		}
		has_trait = {
			value = 1
			trait = scholar
		}
		has_trait = {
			value = 1
			trait = mystic
		}
		has_trait = {
			value = 1
			trait = erudite
		}
		has_trait = {
			value = 1
			trait = stubborn
		}
		has_trait = {
			value = 1
			trait = patient
		}
		has_trait = {
			value = 1
			trait = genius
		}
		has_trait = {
			value = 1
			trait = quick
		}
		has_trait = {
			value = 1
			trait = shrewd
		}
		has_trait = {
			value = 2
			trait = mage
		}
		society_rank = {
			rank = 4
			value = 10
		}
	}

	member_score_per_attribute = 3
	member_score_per_rank = 100

	member_score = {
		value = 10

		modifier = {
			factor = 2
			trait = diligent
		}
		modifier = {
			factor = 1.5
			trait = scholar
		}
		modifier = {
			factor = 1.5
			trait = mystic
		}
		modifier = {
			factor = 1.5
			trait = erudite
		}
		modifier = {
			factor = 1.5
			trait = stubborn
		}
		modifier = {
			factor = 1.5
			trait = patient
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = genius
				trait = quick
				trait = shrewd
			}
		}
		modifier = {
			factor = 2
			trait = mage
		}
	}
	
	startup_populate = {
	    trigger = {
			ai = yes
	    	controls_religion = no
			age = 16
			is_in_society = no
			is_dumb_trigger = no
			NOT = { trait = zealous } # A zealous view of religion is the enemy of the arcane knowledge seeker
			OR = {
				NOT = { is_priest = yes }				
				OR = {
					trait = mystic
					trait = scholar
					trait = cynical
				}
			}
			OR = {
				AND = {
					is_landed = yes
					learning = 18
					OR = { 
						trait = scholar
						trait = faqih
						trait = erudite
						trait = genius
						trait = quick
						trait = mystic
						learning = 20
					}
				}
				AND = {
					learning = 14
					OR = {
						trait = scholar
						trait = faqih
						trait = erudite
						trait = genius
						trait = mystic
						trait = quick
						trait = reincarnation
						learning = 18
					}
				}
			}
		}
	}
}

## Lilith's Chosen
dw_the_chosen_of_lilith = {
	primary_attribute = intrigue
	is_secret = yes
	criminal = yes
	devil_worshipper = yes
	sound = devil_worshippers_interface
	opinion_to_other_members = +5
	opinion_to_pretenders = -40			#Pretenders is the opinion you have of people perceived/discovered to be in your society.
	opinion_to_perceived_members = -40	#Perceived is the opinion you have of people perceived/discovered to be of a society you're not part of
	opinion_per_rank_above = +10
	society_ranks_gfx = devil_ranks
	
	active = {
		has_heaven_hell_content = yes
	}
	indestructible = yes
	
	can_join_society = {
		hidden_trigger = {
			has_heaven_hell_content = yes # We're putting this here just in case the active block above doesn't work - and in vanilla societies they also double-dipped like this.
			NAND = {
				ai = yes
				is_society_rank_full = { 
					society = dw_the_chosen_of_lilith
					rank = 1
				}
			}
		}
		intrigue = 8
		hidden_trigger = { mercenary = no }
		age = 16
		hidden_trigger = {
			NOT = { has_character_flag = society_join_block }
		}
		custom_tooltip = { text = dw_disapproves_of_satanism_tooltip }
		hidden_trigger = {
			NOT = { has_character_flag = disapproves_of_satanism }
		}
	}

	show_society = {
		has_heaven_hell_content = yes
		age = 16
		#society_member_of = dw_the_chosen_of_lilith
	}

	potential = { } #no rules

	society_rank = {
		level = 1
		limit = 96
		startup_limit = 9
		decisions = {
			dw_prisoner_lilith_sacrifice # Available Decision: Sacrifice Prisoner
			# dw_the_chosen_of_lilith_animal_ritual_sacrifice # Available to be performed once a month
		}
		
		#custom_tooltip = unlockable_DW_powers_at_rank_2;
	}
	
	society_rank = {
		level = 2
		limit = 69
		startup_limit = 6
		modifier = { 
			intrigue = 1
		}
		decisions = {
			# devil_worshipers_summon_familiar #Available Power: Summon Familiar
			# the_devil_worshipers_tainted_touch #Available Power: Curse people with disease
			# devil_worshipers_demonic_possession #Available Power: Possess someone to make fanatically loyal
			dw_chosen_recruit # Screen and invite new characters into the Society
			#Available Power: Abduction plot
			#unlock new options in Seduction and Spy On?
		}
		
		#custom_tooltip = unlockable_DW_powers_at_rank_3;
	}
	
	society_rank = {
		level = 3
		limit = 33
		startup_limit = 3
		modifier = {
			intrigue = 2
		}
		decisions = {
			# devil_worshipers_dark_divorce #Available Power: Dark Divorce
			# devil_worshipers_dark_healing #Available Power: Demonic Healing. Sacrifice a prisoner to heal a random illness or maiming.
			dw_the_chosen_of_lilith_invite_society_member_to_court # Invite one of the Chosen of Lilith to join your court
			#Available Power: Love Potion
		}
		
		#custom_tooltip = unlockable_DW_powers_at_rank_4;
	}

	society_rank = {
		level = 4
		limit = 1 
		startup_limit = 1
		modifier = { 
			intrigue = 3
		}
		decisions = {
			
			# DW_prolong_life #Available Power: Prolong Life
			# DW_demonic_impregnation #Available power: Unholy Impregnation
		}
		obedience_tooltip = obedience_tooltip #this can be unique per rank/society 
		obedient = {
			ROOT = {
				always = yes
			}
		}
	}

	plots = {
		plot1_tag
		plot2_tag
	}
    
	ambitions = {
		ambition1_tag
		ambition2_tag
	}

	monthly_currency_gain = {
		name = currency_name_dw_the_chosen_of_lilith
    
		per_attribute = {
			name = intrigue
			value = 0.5
		}
		has_trait = {
			trait = ambitious
			value = 5
		}
		has_trait = {
			trait = genius
			value = 4
		}
		has_trait = {
			trait = quick
			value = 3
		}
		has_trait = {
			trait = shrewd
			value = 3
		}
		has_trait = {
			trait = hedonist
			value = 3
		}
		has_trait = {
			trait = mystic
			value = 3
		}
		has_trait = {
			trait = seducer
			value = 3
		}
		has_trait = {
			trait = seductress
			value = 3
		}
		has_trait = {
			trait = schemer
			value = 3
		}
		has_trait = {
			trait = impaler
			value = 3
		}
		has_trait = {
			trait = lustful
			value = 1
		}
		has_trait = {
			trait = proud
			value = 1
		}
		has_trait = {
			trait = greedy
			value = 1
		}
		has_trait = {
			trait = deceitful
			value = 1
		}
		has_trait = {
			trait = arbitrary
			value = 1
		}
		society_rank = {
			rank = 4
			value = 10
		}
	}

	member_score_per_attribute = 3
	member_score_per_rank = 100

	member_score = {
		value = 10

		modifier = {
			trait = ambitious
			factor = 1.5
		}
		modifier = {
			trait = genius
			factor = 1.3
		}
		modifier = {
			trait = quick
			factor = 1.3
		}
		modifier = {
			trait = shrewd
			factor = 1.3
		}
		modifier = {
			trait = hedonist
			factor = 1.3
		}
		modifier = {
			trait = mystic
			factor = 1.3
		}
		modifier = {
			trait = seducer
			factor = 1.3
		}
		modifier = {
			trait = seductress
			factor = 1.3
		}
		modifier = {
			trait = schemer
			factor = 1.3
		}
		modifier = {
			trait = impaler
			factor = 1.3
		}
		modifier = {
			trait = lustful
			factor = 1.1
		}
		modifier = {
			trait = proud
			factor = 1.1
		}
		modifier = {
			trait = greedy
			factor = 1.1
		}
		modifier = {
			trait = deceitful
			factor = 1.1
		}
		modifier = {
			trait = arbitrary
			factor = 1.1
		}
	}
	
	startup_populate = {
		trigger = {
			NOT = {
				has_game_rule = {
					name = devil_worshipers
					value = none
				}
			}
			ai = yes
			controls_religion = no
			OR = {
				has_impious_trait_trigger = yes
				has_vice_trigger = yes
				trait = drunkard
				trait = possessed
				trait = lunatic
			}
			age = 16
			is_in_society = no
			NOT = { higher_tier_than = DUKE }
			NOR = {
				mercenary = yes
				holy_order = yes
			}
		}
	}
}
